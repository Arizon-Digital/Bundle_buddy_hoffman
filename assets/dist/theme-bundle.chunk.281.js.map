{"version":3,"file":"theme-bundle.chunk.281.js","mappings":"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","sources":["webpack://bigcommerce-cornerstone/./assets/js/theme/common/utils/safe-string.js","webpack://bigcommerce-cornerstone/./assets/js/theme/product/reviews.js","webpack://bigcommerce-cornerstone/./assets/js/theme/product/image-gallery.js","webpack://bigcommerce-cornerstone/./assets/js/theme/common/utils/api.js","webpack://bigcommerce-cornerstone/./assets/js/theme/common/utils/banner-utils.js","webpack://bigcommerce-cornerstone/./assets/js/theme/halothemes/haloGalleryPopup.js","webpack://bigcommerce-cornerstone/./assets/js/theme/common/product-details.js","webpack://bigcommerce-cornerstone/./assets/js/theme/halothemes/additional_product_colors.js","webpack://bigcommerce-cornerstone/./assets/js/theme/product/video-gallery.js","webpack://bigcommerce-cornerstone/./assets/js/theme/halothemes/haloBundleProducts.js","webpack://bigcommerce-cornerstone/./assets/js/theme/product.js","webpack://bigcommerce-cornerstone/./assets/js/theme/halothemes/haloStickyAddToCart.js","webpack://bigcommerce-cornerstone/./assets/js/theme/halothemes/haloPrevNextProduct.js"],"sourcesContent":["/**\n * This function parses HTML entities in strings\n * @param str: String\n * @returns String\n*/\nexport const safeString = (str) => {\n    const d = new DOMParser();\n    return d.parseFromString(str, 'text/html').body.textContent;\n};\n","import nod from '../common/nod';\nimport { CollapsibleEvents } from '../common/collapsible';\nimport forms from '../common/models/forms';\nimport { safeString } from '../common/utils/safe-string';\nimport { announceInputErrorMessage } from '../common/utils/form-utils';\n\nexport default class {\n    constructor($reviewForm) {\n        this.validator = nod({\n            submit: $reviewForm.find('input[type=\"submit\"]'),\n            tap: announceInputErrorMessage,\n        });\n\n        this.$reviewsContent = $('#product-reviews');\n        this.$collapsible = $('[data-collapsible]', this.$reviewsContent);\n\n        this.initLinkBind();\n        this.injectPaginationLink();\n        this.collapseReviews();\n    }\n\n    /**\n     * On initial page load, the user clicks on \"(12 Reviews)\" link\n     * The browser jumps to the review page and should expand the reviews section\n     */\n    initLinkBind() {\n        const $content = $('#productReviews-content', this.$reviewsContent);\n\n        $('#productReview_link').on('click', () => {\n            $('.productView-reviewTabLink').trigger('click');\n            if (!$content.hasClass('is-open')) {\n                this.$collapsible.trigger(CollapsibleEvents.click);\n            }\n        });\n    }\n\n    collapseReviews() {\n        // We're in paginating state, do not collapse\n        if (window.location.hash && window.location.hash.indexOf('#product-reviews') === 0) {\n            return;\n        }\n\n        // force collapse on page load\n        this.$collapsible.trigger(CollapsibleEvents.click);\n    }\n\n    /**\n     * Inject ID into the pagination link\n     */\n    injectPaginationLink() {\n        const $nextLink = $('.pagination-item--next .pagination-link', this.$reviewsContent);\n        const $prevLink = $('.pagination-item--previous .pagination-link', this.$reviewsContent);\n\n        if ($nextLink.length) {\n            $nextLink.attr('href', `${$nextLink.attr('href')} #product-reviews`);\n        }\n\n        if ($prevLink.length) {\n            $prevLink.attr('href', `${$prevLink.attr('href')} #product-reviews`);\n        }\n    }\n\n    registerValidation(context) {\n        this.context = context;\n        this.validator.add([{\n            selector: '[name=\"revrating\"]',\n            validate: 'presence',\n            errorMessage: safeString(this.context.reviewRating),\n        }, {\n            selector: '[name=\"revtitle\"]',\n            validate: 'presence',\n            errorMessage: safeString(this.context.reviewSubject),\n        }, {\n            selector: '[name=\"revtext\"]',\n            validate: 'presence',\n            errorMessage: safeString(this.context.reviewComment),\n        }, {\n            selector: '.writeReview-form [name=\"email\"]',\n            validate: (cb, val) => {\n                const result = forms.email(val);\n                cb(result);\n            },\n            errorMessage: this.context.reviewEmail,\n        }]);\n\n        return this.validator;\n    }\n\n    validate() {\n        return this.validator.performCheck();\n    }\n}\n","import 'easyzoom';\nimport 'fancybox';\nexport default class ImageGallery {\n    constructor($gallery) {\n        this.$mainImage = $gallery.find('[data-image-gallery-main]');\n        this.$mainImageNested = $gallery.find('[data-main-image]');\n        this.$selectableImages = $gallery.find('[data-image-gallery-item]');\n        this.$swipThumbnails = $gallery.find('.productView-for');\n        this.currentImage = {};\n    }\n\n    init() {\n        this.bindEvents();\n        try {\n            this.fancyboxZoom();\n            window.matchMedia('(min-width: 1025px)').addEventListener('change', () => {\n                this.setImageZoom();\n            });\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n    setMainImage(imgObj) {\n        this.currentImage = { ...imgObj };\n\n        this.setActiveThumb();\n        this.swapMainImage();\n    }\n\n    setAlternateImage(imgObj) {\n        if (!this.savedImage) {\n            this.savedImage = {\n                mainImageUrl: this.$mainImage.find('img').attr('src'),\n                zoomImageUrl: this.$mainImage.attr('data-zoom-image'),\n                mainImageSrcset: this.$mainImage.find('img').attr('srcset'),\n                $selectedThumb: this.currentImage.$selectedThumb,\n            };\n        }\n        this.setMainImage(imgObj);\n    }\n\n    restoreImage() {\n        if (this.savedImage) {\n            this.setMainImage(this.savedImage);\n            delete this.savedImage;\n        }\n    }\n    fancyboxZoom() {\n        $('[data-fancybox=\"images\"]').fancybox({\n            buttons: [\n                \"zoom\",\n                \"slideShow\",\n                \"close\"\n            ]\n        });\n    }\n    selectNewImage(e) {\n        e.preventDefault();\n        const $target = $(e.currentTarget);\n        const imgObj = {\n            mainImageUrl: $target.attr('data-image-gallery-new-image-url'),\n            zoomImageUrl: $target.attr('data-image-gallery-zoom-image-url'),\n            mainImageSrcset: $target.attr('data-image-gallery-new-image-srcset'),\n            $selectedThumb: $target,\n            mainImageAlt: $target.children().first().attr('alt'),\n        };\n        this.setMainImage(imgObj);\n    }\n\n    selectNewImage2(e) {\n        const $target = $(e.currentTarget).find('.slick-current [data-image-gallery-item]');\n        const imgObj = {\n            mainImageUrl: $target.attr('data-image-gallery-new-image-url'),\n            zoomImageUrl: $target.attr('data-image-gallery-zoom-image-url'),\n            mainImageSrcset: $target.attr('data-image-gallery-new-image-srcset'),\n            $selectedThumb: $(e.currentTarget).find('.slick-current'),\n        };\n        this.setMainImage(imgObj);\n    }\n\n    setActiveThumb() {\n        this.$selectableImages.removeClass('is-active');\n        if (this.currentImage.$selectedThumb) {\n            this.currentImage.$selectedThumb.addClass('is-active');\n        }\n    }\n\n    swapMainImage() {\n        const isBrowserIE = navigator.userAgent.includes('Trident');\n\n        this.easyzoom.data('easyZoom').swap(\n            this.currentImage.mainImageUrl,\n            this.currentImage.zoomImageUrl,\n            this.currentImage.mainImageSrcset,\n        );\n\n        this.$mainImage.attr({\n            'data-zoom-image': this.currentImage.zoomImageUrl,\n        })\n        .find('a').attr({href: this.currentImage.zoomImageUrl})\n        .find('img').attr({src: this.currentImage.mainImageUrl});\n\n        this.$mainImage.find('.productView-img-container img').attr({srcset: this.currentImage.mainImageUrl});\n\n        this.$mainImageNested.attr({\n            alt: this.currentImage.mainImageAlt,\n            title: this.currentImage.mainImageAlt,\n        });\n\n        if (isBrowserIE) {\n            const fallbackStylesIE = {\n                'background-image': `url(${this.currentImage.mainImageUrl})`,\n                'background-position': 'center',\n                'background-repeat': 'no-repeat',\n                'background-origin': 'content-box',\n                'background-size': 'contain',\n            };\n\n            this.$mainImageNested.css(fallbackStylesIE);\n        }\n    }\n\n    checkImage() {\n        const $imageContainer = $('.productView-image');\n        const containerHeight = $imageContainer.height();\n        const containerWidth = $imageContainer.width();\n\n        const $image = this.easyzoom.data('easyZoom').$zoom;\n        const height = $image.height();\n        const width = $image.width();\n\n        if (height < containerHeight || width < containerWidth) {\n            this.easyzoom.data('easyZoom').hide();\n        }\n    }\n\n    setImageZoom() {\n        this.easyzoom = this.$mainImage.easyZoom({\n            onShow: () => this.checkImage(),\n            errorNotice: '',\n            loadingNotice: '',\n        });\n    }\n\n    bindEvents() {\n        this.$selectableImages.on('click', this.selectNewImage.bind(this));\n        this.$swipThumbnails.on('afterChange', this.selectNewImage2.bind(this));\n    }\n}\n","/**\n * This function removes any empty string values from the formData\n * @param formData: FormData object\n * @returns FormData object\n*/\nexport const filterEmptyValuesFromForm = formData => {\n    const res = new FormData();\n\n    try {\n        for (const [key, val] of formData) {\n            if (val !== '') {\n                res.append(key, val);\n            }\n        }\n    } catch (e) {\n        console.log(e); // eslint-disable-line no-console\n    }\n\n    return res;\n};\n\n/**\n * https://stackoverflow.com/questions/49672992/ajax-request-fails-when-sending-formdata-including-empty-file-input-in-safari\n * Safari browser with jquery 3.3.1 has an issue uploading empty file parameters. This function removes any empty files from the form params\n * @param formData: FormData object\n * @returns FormData object\n */\nexport const filterEmptyFilesFromForm = formData => {\n    const res = new FormData();\n\n    try {\n        for (const [key, val] of formData) {\n            if (!(val instanceof File) || val.name || val.size) {\n                res.append(key, val);\n            }\n        }\n    } catch (e) {\n        console.error(e); // eslint-disable-line no-console\n    }\n\n    return res;\n};\n\n/**\n * This function removes empty string values and empty files from the formData\n * @param formData: FormData object\n * @returns FormData object\n */\nexport const normalizeFormData = formData => filterEmptyValuesFromForm(filterEmptyFilesFromForm(formData));\n","import { isBrowserIE } from './ie-helpers';\n\nconst bannerUtils = {\n    dispatchProductBannerEvent: (productAttributes) => {\n        if (!productAttributes.price || isBrowserIE) return;\n\n        let price = 0;\n\n        if (!productAttributes.price.price_range) {\n            if (productAttributes.price.without_tax) {\n                price = productAttributes.price.without_tax.value;\n            }\n\n            if (productAttributes.price.with_tax) {\n                price = productAttributes.price.with_tax.value;\n            }\n        }\n\n        const evt = new CustomEvent('bigcommerce.productpricechange', {\n            detail: {\n                amount: price,\n            },\n        });\n\n        window.dispatchEvent(evt);\n    },\n};\n\nexport default bannerUtils;\n","export default function(context, $gallery) {\r\n    var container_div = $gallery.attr('class');\r\n        container_div = container_div.replace('modal-body', '').replace(' ', '');\r\n    \r\n    jQuery.fn.vGallery = function(options){\r\n        var element = jQuery(this);\r\n        var galleryID = \"#\" + element.attr(\"id\");\r\n\r\n        var brand = $('.productView-details .productView-brand a').text(),\r\n            title = $('.productView-details .productView-product .productView-title').text();\r\n        if ($('#video-gallery-pc-popup').length) {\r\n            $('#video-gallery-pc-popup .modal-header-title').html('<strong>' +brand+ '</strong>' + title);\r\n        }\r\n        \r\n        if(!options)\r\n            var options = {};\r\n        var b=new haloGallery();\r\n        b.init(element , options);\r\n\r\n        $('[data-image-gallery-item]', $gallery).each(function(){\r\n            b.add({'thumbnail': $(this).find('img').attr('src') ,'url': $(this).attr('data-image-gallery-zoom-image-url')});\r\n        });\r\n\r\n        $('[data-video-item]', $gallery).each(function(){\r\n            b.add({'thumbnail': '//i.ytimg.com/vi/' + $(this).attr('data-video-id') + '/default.jpg','content':\"<iframe class='youtube-iframe' width='100%'  src='https://www.youtube.com/embed/\"+ $(this).attr('data-video-id') +\"?enablejsapi=1' frameborder='0' allowfullscreen></iframe>\"});\r\n        });\r\n\r\n        b.addPopview();\r\n    }\r\n\r\n    function haloGallery() {\r\n        var g_objGallery;\r\n        var g_options = {\r\n        }\r\n\r\n        this.init = function(gallery, customOptions){\r\n            g_objGallery = jQuery(gallery);\r\n            g_options = jQuery.extend(g_options, customOptions);\r\n            this.data = [];\r\n        }\r\n\r\n        this.data = [];\r\n        this.round=[];\r\n        this.add = function(ops)\r\n        {\r\n            if(ops.url || ops.content)\r\n            {\r\n                var dfs={'thumbnail':'','url':'','type':'','content':'','w':0,'height':0,'loaded':false};\r\n                ops=$.extend({},dfs,ops);\r\n\r\n                if(ops.content)ops.u_content=ops.content;\r\n                else\r\n                {\r\n                    if(!ops.type)ops.type='image';\r\n                    if(ops.type='image')\r\n                    {\r\n                        ops.u_content=\"<img src='\"+ops.url+\"'>\";\r\n                    }\r\n                }\r\n\r\n                if(!ops.thumbnail)\r\n                    ops.thumbnail=ops.url;\r\n                if(ops.thumbnail)\r\n                    ops.u_thumbnail=\"<img src='\"+ops.thumbnail+\"'>\";\r\n                else ops.u_thumbnail=ops.u_content;\r\n                if(!ops.u_thumbnail)\r\n                    ops.u_thumbnail=\"<div class='thumbnail'></div>\";\r\n\r\n                this.data.push(ops);\r\n            }\r\n        }\r\n        this.reround=function()\r\n        {\r\n            this.round=[];\r\n            var pp;\r\n            var c=this.data.length;\r\n            for(var i=0;i<c;i++)\r\n            {\r\n                pp={'next':i+1,'prev':i-1,'current':i};\r\n                this.round[i]=pp;\r\n                this.data[i].stt=i;\r\n            }\r\n            this.round[0].prev=c-1;\r\n            this.round[c-1].next=0;\r\n        }\r\n        this.addPopview = function(ops) {\r\n            this.reround();\r\n            var dfs={'width':'100%','height':'100%','view_slide':true,cur:0,'time':400,'center':true};\r\n            ops=$.extend({},dfs,ops);\r\n            ops.map={'di':{},'ve':{},'round':{}};ops.stt=0;\r\n            var cthis=this;\r\n            set();\r\n            bindEvent();\r\n\r\n            function set()\r\n            {\r\n                if($('.'+container_div+'.vgallery_popup').length > 0) $('.'+container_div+'.vgallery_popup').remove();\r\n                var s=\"<div class='\"+container_div+\" vgallery_popup'><div class='acontent'><div class='bcontent'></div></div></div>\";\r\n                \r\n                if( g_objGallery.hasClass(container_div) ){\r\n                    g_objGallery.html(s);\r\n                }\r\n                else{\r\n                    g_objGallery.append(s);\r\n                }\r\n                g_objGallery.find('.vgallery_popup').hide();\r\n                g_objGallery.find('.'+container_div).show();\r\n                \r\n                ops.ob=$('.'+container_div+'.vgallery_popup');\r\n                ops.ob_ccontent=$('>.acontent',ops.ob);\r\n                ops.ob_content=$('>.acontent>.bcontent',ops.ob);\r\n                $(ops.ob_ccontent).css({'width':ops.width,'height':ops.height});\r\n                if(ops.view_slide) draw_slide();\r\n\r\n            }\r\n            function aview(pp)\r\n            {\r\n                return \"<li><span class='thumbbsd' data='\"+pp.stt+\"'>\"+pp.u_thumbnail+\"</span></li>\";\r\n            }\r\n            function draw_slide()\r\n            {\r\n                var s1='',s2='';\r\n\r\n                for(var i=0;i<cthis.data.length;i++)\r\n                {\r\n\r\n                    if(cthis.data[i].type)\r\n                    s1+=aview(cthis.data[i])\r\n                    else\r\n                    s2+=aview(cthis.data[i]);\r\n                }\r\n                if(s1)s1=\"<div class='gallery-thumbnail gallery-thumbnail-1'><h2></h2><ul>\"+s1+\"</ul></div>\";\r\n                if(s2)s2=\"<div class='gallery-thumbnail gallery-thumbnail-2'><h2></h2><ul>\"+s2+\"</ul></div>\";\r\n                var s=\"<div class='content_slide'><div class='box1'><div class='btn-arrow btn-prev'></div><div class='galleryView'></div><div class='btn-arrow btn-next'></div></div><div class='box2'>\"+s1+s2+\"</div></div>\";\r\n                $(ops.ob_content).append(s);\r\n                ops.ob_sct=$('.box1 > .galleryView');\r\n                ops.ob_e=$('.thumbbsd',ops.ob);\r\n                var i=-1;\r\n                $.each(ops.ob_e,function(){\r\n                    i++;\r\n                    var v=$(this).attr('data');\r\n                    ops.map.di[i]=v;\r\n                    ops.map.ve[v]=i;\r\n\r\n                })\r\n                ar(ops.cur);\r\n            }\r\n            function ar(num)\r\n            {\r\n                if(num==-1)\r\n                {\r\n                    $(ops.ob_sct).html('');\r\n                }\r\n                else\r\n                {\r\n                    ops.cur=num;\r\n                    ops.current=ops.map.ve[ops.cur];\r\n\r\n                    $(ops.ob_e).removeClass('thumb-video');\r\n                    $(ops.ob_e).eq(ops.map.ve[ops.cur]).addClass('thumb-video');\r\n                    $(ops.ob_sct).animate({'opacity':0},ops.time/2,function(){\r\n                        $(ops.ob_sct).html(cthis.data[num].u_content);\r\n                        $(ops.ob_sct).animate({'opacity':1},ops.time/2);\r\n                       // $(ops.ob_sct).trigger('zoom.destroy').zoom({ touch: false, onZoomIn: true, onZoomOut: true });\r\n                    });\r\n\r\n                }\r\n            }\r\n            function bindEvent()\r\n            {   \r\n                $('[data-image-gallery-main]', $gallery).bind('click', function(e){\r\n                    ar( ops.cur );\r\n                    e.preventDefault();\r\n                });\r\n                $('[data-image-gallery-item]', $gallery).bind('hover', function(e){\r\n                    var num = $('[data-image-gallery-item]', $gallery).index( this );\r\n                    if(num!=-1)\r\n                    {\r\n                        ops.cur=num;\r\n                    }\r\n                });\r\n                $('[data-image-gallery-item]', $gallery).bind('click', function(e){\r\n                    var container_div = $gallery.attr('class');\r\n                    container_div = container_div.replace('modal-body', '').replace(' ', '');\r\n                    $('.vgallery_popup').hide();\r\n                    $('.'+container_div+'.vgallery_popup').show();\r\n                    ar( $('[data-image-gallery-item]', $gallery).index( this ) );\r\n                    \r\n                    e.preventDefault();\r\n                });\r\n                $('[data-video-icon]', $gallery).bind('click', function(e){\r\n                    var container_div = $gallery.attr('class');\r\n                    container_div = container_div.replace('modal-body', '').replace(' ', '');\r\n                    $('.vgallery_popup').hide();\r\n                    $('.'+container_div+'.vgallery_popup').show();\r\n                    ar( $('[data-image-gallery-item]', $gallery).length );\r\n                    e.preventDefault();\r\n                });\r\n                $('.btn-next',ops.ob).bind('click',function(e){\r\n                    if(ops.current > ops.ob.length) ops.current = ops.cur;\r\n                    var s=cthis.round[ops.current].next;\r\n                    ar(ops.map.di[s]);\r\n                    e.preventDefault();\r\n                })\r\n                $('.btn-prev',ops.ob).bind('click',function(e){\r\n                    if(ops.current > ops.ob.length) ops.current = ops.cur;\r\n                    var s=cthis.round[ops.current].prev;\r\n                    ar(ops.map.di[s]);\r\n                    e.preventDefault();\r\n                })\r\n                $(ops.ob_e).bind('click',function(){\r\n                    var inx=$(this).attr('data');\r\n                    ar(inx);\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    $(document).ready(function(){\r\n        $(\"#gallery\").vGallery({\r\n            gridpanel_vertical_scroll: false,\r\n        });\r\n\r\n    });\r\n}\r\n","import utils from '@bigcommerce/stencil-utils';\nimport ProductDetailsBase, {\n    optionChangeDecorator,\n} from './product-details-base';\nimport 'foundation-sites/js/foundation/foundation';\nimport 'foundation-sites/js/foundation/foundation.reveal';\nimport ImageGallery from '../product/image-gallery';\nimport modalFactory, { showAlertModal, modalTypes } from '../global/modal';\nimport { isEmpty, isPlainObject } from 'lodash';\nimport { normalizeFormData } from './utils/api';\nimport { isBrowserIE, convertIntoArray } from './utils/ie-helpers';\nimport bannerUtils from './utils/banner-utils';\nimport haloCalculateFreeShipping from '../halothemes/haloCalculateFreeShipping';\nimport GalleryPopup from '../halothemes/haloGalleryPopup';\nimport additionalProductColors from '../halothemes/additional_product_colors';\n\nexport default class ProductDetails extends ProductDetailsBase {\n    constructor($scope, context, productAttributesData = {}) {\n        super($scope, context);\n\n        this.$overlay = $('[data-cart-item-add] .loadingOverlay');\n        this.imageGallery = new ImageGallery(\n            $('[data-image-gallery]', this.$scope)\n        );\n        this.imageGallery.init();\n        this.listenQuantityChange();\n        this.$swatchOptionMessage = $('.swatch-option-message');\n        this.swatchOptionMessageInitText = this.$swatchOptionMessage.text();\n\n        /* Halothemes */\n        new GalleryPopup(this.context, this.$scope);\n\n        if ($('.sold-product').length) {\n            this.soldProduct(this.context);\n        }\n\n        const $form = $('form[data-cart-item-add]', $scope);\n        const $productOptionsElement = $('[data-product-option-change]', $form);\n        const hasOptions = $productOptionsElement.html().trim().length;\n        const hasDefaultOptions =\n            $productOptionsElement.find('[data-default]').length;\n        const $productSwatchGroup = $('[id*=\"attribute_swatch\"]', $form);\n\n        if (context.showSwatchNames) {\n            this.$swatchOptionMessage.removeClass('u-hidden');\n            $productSwatchGroup.on('change', ({ target }) =>\n                this.showSwatchNameOnOption($(target))\n            );\n\n            $.each($productSwatchGroup, (_, element) => {\n                if ($(element).is(':checked'))\n                    this.showSwatchNameOnOption($(element));\n            });\n        }\n\n        $productOptionsElement.on('change', (event) => {\n            this.productOptionsChanged(event);\n            this.setProductVariant();\n            this.setProductVariant2();\n\n            /* Mint Start Update 05022024*/\n            /* Remove default class when don't select option */\n            if(event.target.value === '') {\n                $('.productView-product .productView-price').removeClass(\n                    'custom-defaultPrice'\n                );\n            } else {\n                $('.productView-product .productView-price').addClass(\n                    'custom-defaultPrice'\n                );\n            }\n        });\n\n        //call script\n        additionalProductColors(this.context, $productOptionsElement);\n\n        $form.on('submit', (event) => {\n            this.addProductToCart(event, $form[0]);\n        });\n\n        // add to cart 2\n        const $form2 = $('form[data-cart-item-add-2]', $scope);\n        const $productOptionsElement2 = $(\n            '[data-product-option-change-4]',\n            $form2\n        );\n\n        $productOptionsElement2.on('change', (event) => {\n            this.productOptionsChanged2(event);\n            this.setProductVariant();\n            this.setProductVariant2();\n        });\n\n        $(document).on(\n            'click',\n            '#form-action-addToCart2.themevale',\n            function (event) {\n                $form2.submit();\n            }\n        );\n\n        $form2.on('submit', (event) => {\n            this.addProductToCart(event, $form2[0]);\n        });\n\n        // Update product attributes. Also update the initial view in case items are oos\n        // or have default variant properties that change the view\n        if (\n            (isEmpty(productAttributesData) || hasDefaultOptions) &&\n            hasOptions\n        ) {\n            const $productId = $('[name=\"product_id\"]', $form).val();\n            const optionChangeCallback = optionChangeDecorator.call(\n                this,\n                hasDefaultOptions\n            );\n\n            utils.api.productAttributes.optionChange(\n                $productId,\n                $form.serialize(),\n                'products/bulk-discount-rates',\n                optionChangeCallback\n            );\n        } else {\n            this.updateProductAttributes(productAttributesData);\n            bannerUtils.dispatchProductBannerEvent(productAttributesData);\n        }\n\n        $productOptionsElement.show();\n\n        this.previewModal = modalFactory('#previewModal')[0];\n\n        if (this.context.themeSettings.halo_viewing_product) {\n            this.viewingProduct(this.context);\n        }\n        if ($form[0].checkValidity()) {\n            this.updateProductDetailsData();\n        } else {\n            this.toggleWalletButtonsVisibility(false);\n        }\n    }\n\n    setProductVariant() {\n        const unsatisfiedRequiredFields = [];\n        const options = [];\n\n        $.each(\n            $('.productView-options [data-product-attribute]'),\n            (index, value) => {\n                const optionLabel = value.children[0].innerText;\n                const optionTitle = optionLabel.split(':')[0].trim();\n                const required = optionLabel.toLowerCase().includes('required');\n                const type = value.getAttribute('data-product-attribute');\n\n                if (\n                    (type === 'input-file' ||\n                        type === 'input-text' ||\n                        type === 'input-number') &&\n                    value.querySelector('input').value === '' &&\n                    required\n                ) {\n                    unsatisfiedRequiredFields.push(value);\n                }\n\n                if (\n                    type === 'textarea' &&\n                    value.querySelector('textarea').value === '' &&\n                    required\n                ) {\n                    unsatisfiedRequiredFields.push(value);\n                }\n\n                if (type === 'date') {\n                    const isSatisfied = Array.from(\n                        value.querySelectorAll('select')\n                    ).every((select) => select.selectedIndex !== 0);\n\n                    if (isSatisfied) {\n                        const dateString = Array.from(\n                            value.querySelectorAll('select')\n                        )\n                            .map((x) => x.value)\n                            .join('-');\n                        options.push(`${optionTitle}:${dateString}`);\n\n                        return;\n                    }\n\n                    if (required) {\n                        unsatisfiedRequiredFields.push(value);\n                    }\n                }\n\n                if (type === 'set-select') {\n                    const select = value.querySelector('select');\n                    const selectedIndex = select.selectedIndex;\n\n                    if (selectedIndex !== 0) {\n                        options.push(\n                            `${optionTitle}:${select.options[selectedIndex].innerText}`\n                        );\n                        $(value.children[0])\n                            .find('[data-option-value]')\n                            .text(select.options[selectedIndex].innerText);\n\n                        return;\n                    }\n\n                    if (required) {\n                        unsatisfiedRequiredFields.push(value);\n                    }\n                }\n\n                if (\n                    type === 'set-rectangle' ||\n                    type === 'set-radio' ||\n                    type === 'swatch' ||\n                    type === 'input-checkbox' ||\n                    type === 'product-list'\n                ) {\n                    const checked = value.querySelector(':checked');\n                    if (checked) {\n                        const getSelectedOptionLabel = () => {\n                            const productVariantslist = convertIntoArray(\n                                value.children\n                            );\n                            const matchLabelForCheckedInput = (inpt) =>\n                                inpt.dataset.productAttributeValue ===\n                                checked.value;\n                            return productVariantslist.filter(\n                                matchLabelForCheckedInput\n                            )[0];\n                        };\n                        if (\n                            type === 'set-rectangle' ||\n                            type === 'set-radio' ||\n                            type === 'product-list'\n                        ) {\n                            const label = isBrowserIE\n                                ? getSelectedOptionLabel().innerText.trim()\n                                : checked.labels[0].innerText;\n                            if (label) {\n                                options.push(`${optionTitle}:${label}`);\n                                $(value.children[0])\n                                    .find('[data-option-value]')\n                                    .text(label);\n                            }\n                        }\n\n                        if (type === 'swatch') {\n                            const label = isBrowserIE\n                                ? getSelectedOptionLabel().children[0]\n                                : checked.labels[0].children[0];\n                            if (label) {\n                                options.push(`${optionTitle}:${label.title}`);\n                                $(value.children[0])\n                                    .find('[data-option-value]')\n                                    .text(label.title);\n                            }\n                        }\n\n                        if (type === 'input-checkbox') {\n                            options.push(`${optionTitle}:Yes`);\n                        }\n\n                        return;\n                    }\n\n                    if (type === 'input-checkbox') {\n                        options.push(`${optionTitle}:No`);\n                    }\n\n                    if (required) {\n                        unsatisfiedRequiredFields.push(value);\n                    }\n                }\n            }\n        );\n\n        let productVariant =\n            unsatisfiedRequiredFields.length === 0\n                ? options.sort().join(', ')\n                : 'unsatisfied';\n        const view = $('.productView');\n\n        if (productVariant) {\n            productVariant =\n                productVariant === 'unsatisfied' ? '' : productVariant;\n            if (view.attr('data-event-type')) {\n                view.attr('data-product-variant', productVariant);\n            } else {\n                const productName = view\n                    .find('.productView-title')[0]\n                    .innerText.replace(/\"/g, '\\\\$&');\n                const card = $(`[data-name=\"${productName}\"]`);\n                card.attr('data-product-variant', productVariant);\n            }\n        }\n    }\n\n    setProductVariant2() {\n        const unsatisfiedRequiredFields = [];\n        const options = [];\n\n        $.each(\n            $('[data-product-option-change-4] [data-product-attribute]'),\n            (index, value) => {\n                const optionLabel = value.children[0].innerText;\n                const optionTitle = optionLabel.split(':')[0].trim();\n                const required = optionLabel.toLowerCase().includes('required');\n                const type = value.getAttribute('data-product-attribute');\n\n                if (\n                    (type === 'input-file' ||\n                        type === 'input-text' ||\n                        type === 'input-number') &&\n                    value.querySelector('input').value === '' &&\n                    required\n                ) {\n                    unsatisfiedRequiredFields.push(value);\n                }\n\n                if (\n                    type === 'textarea' &&\n                    value.querySelector('textarea').value === '' &&\n                    required\n                ) {\n                    unsatisfiedRequiredFields.push(value);\n                }\n\n                if (type === 'date') {\n                    const isSatisfied = Array.from(\n                        value.querySelectorAll('select')\n                    ).every((select) => select.selectedIndex !== 0);\n\n                    if (isSatisfied) {\n                        const dateString = Array.from(\n                            value.querySelectorAll('select')\n                        )\n                            .map((x) => x.value)\n                            .join('-');\n                        options.push(`${optionTitle}:${dateString}`);\n\n                        return;\n                    }\n\n                    if (required) {\n                        unsatisfiedRequiredFields.push(value);\n                    }\n                }\n\n                if (type === 'set-select') {\n                    const select = value.querySelector('select');\n                    const selectedIndex = select.selectedIndex;\n\n                    if (selectedIndex !== 0) {\n                        options.push(\n                            `${optionTitle}:${select.options[selectedIndex].innerText}`\n                        );\n                        $(value.children[0])\n                            .find('[data-option-value]')\n                            .text(select.options[selectedIndex].innerText);\n                        return;\n                    }\n\n                    if (required) {\n                        unsatisfiedRequiredFields.push(value);\n                    }\n                }\n\n                if (\n                    type === 'set-rectangle' ||\n                    type === 'set-radio' ||\n                    type === 'swatch' ||\n                    type === 'input-checkbox' ||\n                    type === 'product-list'\n                ) {\n                    const checked = value.querySelector(':checked');\n                    if (checked) {\n                        if (type === 'set-rectangle') {\n                            const label = $(\n                                checked.labels[0].children[0]\n                            ).text();\n\n                            if (label) {\n                                options.push(`${optionTitle}:${label}`);\n                                $(value.children[0])\n                                    .find('[data-option-value]')\n                                    .text(label);\n                            }\n                        }\n                        if (type === 'set-radio' || type === 'product-list') {\n                            const label = $(checked.labels[0]).text();\n\n                            if (label) {\n                                options.push(`${optionTitle}:${label}`);\n                                $(value.children[0])\n                                    .find('[data-option-value]')\n                                    .text(label);\n                            }\n                        }\n\n                        if (type === 'swatch') {\n                            const label = checked.labels[0].children[0];\n                            if (label) {\n                                options.push(`${optionTitle}:${label.title}`);\n                                $(value.children[0])\n                                    .find('[data-option-value]')\n                                    .text(label.title);\n                            }\n                        }\n\n                        if (type === 'input-checkbox') {\n                            options.push(`${optionTitle}:Yes`);\n                        }\n\n                        return;\n                    }\n\n                    if (type === 'input-checkbox') {\n                        options.push(`${optionTitle}:No`);\n                    }\n\n                    if (required) {\n                        unsatisfiedRequiredFields.push(value);\n                    }\n                }\n            }\n        );\n\n        let productVariant =\n            unsatisfiedRequiredFields.length === 0\n                ? options.sort().join(', ')\n                : 'unsatisfied';\n        const view = $('.productView');\n\n        if (productVariant) {\n            productVariant =\n                productVariant === 'unsatisfied' ? '' : productVariant;\n            if (view.attr('data-event-type')) {\n                view.attr('data-product-variant', productVariant);\n            } else {\n                const productName =\n                    view.find('.productView-title')[0].innerText;\n                const card = $(`[data-name=\"${productName}\"]`);\n                card.attr('data-product-variant', productVariant);\n            }\n        }\n    }\n\n    /**\n     * Checks if the current window is being run inside an iframe\n     * @returns {boolean}\n     */\n    isRunningInIframe() {\n        try {\n            return window.self !== window.top;\n        } catch (e) {\n            return true;\n        }\n    }\n\n    /**\n     *\n     * Handle product options changes\n     *\n     */\n    productOptionsChanged(event) {\n        const $changedOption = $(event.target);\n        const $form = $changedOption.parents('form');\n        const productId = $('[name=\"product_id\"]', $form).val();\n\n        // Do not trigger an ajax request if it's a file or if the browser doesn't support FormData\n        if (\n            $changedOption.attr('type') === 'file' ||\n            window.FormData === undefined\n        ) {\n            return;\n        }\n\n        utils.api.productAttributes.optionChange(\n            productId,\n            $form.serialize(),\n            'products/bulk-discount-rates',\n            (err, response) => {\n                const productAttributesData = response.data || {};\n                const productAttributesContent = response.content || {};\n                this.updateProductAttributes(productAttributesData);\n                this.updateView(\n                    productAttributesData,\n                    productAttributesContent\n                );\n                bannerUtils.dispatchProductBannerEvent(productAttributesData);\n                this.updateProductDetailsData();\n            }\n        );\n    }\n\n    productOptionsChanged2(event) {\n        const $changedOption = $(event.target);\n        const $form = $changedOption.parents('form');\n        const productId = $('[name=\"product_id\"]', $form).val();\n\n        // Do not trigger an ajax request if it's a file or if the browser doesn't support FormData\n        if (\n            $changedOption.attr('type') === 'file' ||\n            window.FormData === undefined\n        ) {\n            return;\n        }\n        utils.api.productAttributes.optionChange(\n            productId,\n            $form.serialize(),\n            'products/bulk-discount-rates',\n            (err, response) => {\n                const productAttributesData = response.data || {};\n                const productAttributesContent = response.content || {};\n                this.updateProductAttributes(productAttributesData);\n                this.updateView(\n                    productAttributesData,\n                    productAttributesContent\n                );\n\n                setTimeout(function () {\n                    var change_img = $(\n                        '.productView-images [data-image-gallery-main-0] .zoomImg'\n                    ).attr('src');\n                    $('#sticky_addtocart .product-image img').attr(\n                        'src',\n                        change_img\n                    );\n                }, 100);\n\n                $.each(\n                    $(\n                        '[data-product-option-change-4] [data-product-attribute]'\n                    ),\n                    function (i) {\n                        var el = $(this)\n                            .find('.form-radio:checked')\n                            .attr('value');\n                        $.each(\n                            $(\n                                '.productView-options [data-product-option-change] [data-product-attribute] input'\n                            ),\n                            function (i) {\n                                var op = $(this).attr('value');\n                                if (\n                                    $(this)\n                                        .next()\n                                        .hasClass('form-option-swatch')\n                                ) {\n                                    var opTitle = $(this)\n                                        .next()\n                                        .children('.form-option-variant')\n                                        .attr('title');\n                                } else if (\n                                    $(this)\n                                        .next()\n                                        .children('.form-option-variant').length\n                                ) {\n                                    var opTitle = $(this)\n                                        .next()\n                                        .children('.form-option-variant')\n                                        .text();\n                                } else {\n                                    var opTitle = $(this)\n                                        .next('.form-label')\n                                        .text();\n                                }\n\n                                if (el == op) {\n                                    $(this).prop('checked', true);\n                                    $(this)\n                                        .parents('[data-product-attribute]')\n                                        .find(\n                                            '.form-label--alternate [data-option-value]'\n                                        )\n                                        .text(opTitle);\n                                }\n                            }\n                        );\n                    }\n                );\n\n                var checkedColor = $(\n                    '[data-product-option-change-4] [data-product-attribute=\"swatch\"]'\n                )\n                    .find('.form-radio:checked')\n                    .attr('value');\n                var color = $(\n                    '[data-product-option-change-4] [data-product-attribute=\"swatch\"]'\n                )\n                    .find('.form-radio:checked')\n                    .next()\n                    .find('> span')\n                    .attr('title');\n                $('#sticky_addtocart .productView-title .color-name').text(\n                    ' - ' + color\n                );\n            }\n        );\n    }\n\n    /**\n     * if this setting is enabled in Page Builder\n     * show name for swatch option\n     */\n    showSwatchNameOnOption($swatch) {\n        const swatchName = $swatch.attr('aria-label');\n\n        $('[data-product-attribute=\"swatch\"] [data-option-value]').text(\n            swatchName\n        );\n        this.$swatchOptionMessage.text(\n            `${this.swatchOptionMessageInitText} ${swatchName}`\n        );\n        this.setLiveRegionAttributes(\n            this.$swatchOptionMessage,\n            'status',\n            'assertive'\n        );\n    }\n\n    setLiveRegionAttributes($element, roleType, ariaLiveStatus) {\n        $element.attr({\n            role: roleType,\n            'aria-live': ariaLiveStatus,\n        });\n    }\n\n    showProductImage(image) {\n        if (isPlainObject(image)) {\n            const zoomImageUrl = utils.tools.imageSrcset.getSrcset(\n                image.data,\n                { '1x': this.context.zoomSize }\n                /*\n                    Should match zoom size used for data-zoom-image in\n                    components/products/product-view.html\n\n                    Note that this will only be used as a fallback image for browsers that do not support srcset\n\n                    Also note that getSrcset returns a simple src string when exactly one size is provided\n                */\n            );\n\n            const mainImageUrl = utils.tools.imageSrcset.getSrcset(\n                image.data,\n                { '1x': this.context.productSize }\n                /*\n                    Should match fallback image size used for the main product image in\n                    components/products/product-view.html\n\n                    Note that this will only be used as a fallback image for browsers that do not support srcset\n\n                    Also note that getSrcset returns a simple src string when exactly one size is provided\n                */\n            );\n\n            const mainImageSrcset = utils.tools.imageSrcset.getSrcset(\n                image.data\n            );\n\n            this.imageGallery.setAlternateImage({\n                mainImageUrl,\n                zoomImageUrl,\n                mainImageSrcset,\n            });\n        } else {\n            this.imageGallery.restoreImage();\n        }\n    }\n\n    /**\n     *\n     * Handle action when the shopper clicks on + / - for quantity\n     *\n     */\n    listenQuantityChange() {\n        this.$scope.on('click', '[data-quantity-change] button', (event) => {\n            event.preventDefault();\n            const $target = $(event.currentTarget);\n            const viewModel = this.getViewModel(this.$scope);\n            const $input = viewModel.quantity.$input;\n            const quantityMin = parseInt($input.data('quantityMin'), 10);\n            let quantityMax = parseInt($input.data('quantityMax'), 10);\n\n            const currentStock = parseInt($('span[data-product-stock]').html());\n\n            if (currentStock) {\n                quantityMax = currentStock;\n            } else {\n                quantityMax = quantityMax;\n            }\n            let qty = parseInt($input.val(), 10);\n\n            // If action is incrementing\n            if ($target.data('action') === 'inc') {\n                // If quantity max option is set\n                if (quantityMax > 0) {\n                    // Check quantity does not exceed max\n                    if (qty + 1 <= quantityMax) {\n                        qty++;\n                    }\n                } else {\n                    qty++;\n                }\n            } else if (qty > 1) {\n                // If quantity min option is set\n                if (quantityMin > 0) {\n                    // Check quantity does not fall below min\n                    if (qty - 1 >= quantityMin) {\n                        qty--;\n                    }\n                } else {\n                    qty--;\n                }\n            }\n\n            // update hidden input\n            viewModel.quantity.$input.val(qty);\n            // update text\n            viewModel.quantity.$text.text(qty);\n            this.updateProductDetailsData();\n        });\n\n        // Prevent triggering quantity change when pressing enter\n        this.$scope.on('keypress', '.form-input--incrementTotal', (event) => {\n            // If the browser supports event.which, then use event.which, otherwise use event.keyCode\n            const x = event.which || event.keyCode;\n            if (x === 13) {\n                // Prevent default\n                event.preventDefault();\n            }\n            this.updateProductDetailsData();\n        });\n    }\n\n    /**\n     *\n     * Add a product to cart\n     *\n     */\n    addProductToCart(event, form) {\n        const $addToCartBtn = $('#form-action-addToCart', $(event.target));\n        const originalBtnVal = $addToCartBtn.val();\n        const waitMessage = $addToCartBtn.data('waitMessage');\n\n        // Do not do AJAX if browser doesn't support FormData\n        if (window.FormData === undefined) {\n            return;\n        }\n\n        // Prevent default\n        event.preventDefault();\n\n        $addToCartBtn.val(waitMessage).prop('disabled', true);\n\n        this.$overlay.show();\n\n        // Add item to cart\n        utils.api.cart.itemAdd(\n            normalizeFormData(new FormData(form)),\n            (err, response) => {\n                const errorMessage = err || response.data.error;\n\n                $addToCartBtn.val(originalBtnVal).prop('disabled', false);\n\n                this.$overlay.hide();\n\n                // Guard statement\n                if (errorMessage) {\n                    // Strip the HTML from the error message\n                    const tmp = document.createElement('DIV');\n                    tmp.innerHTML = errorMessage;\n\n                    return showAlertModal(tmp.textContent || tmp.innerText);\n                }\n\n                // Open preview modal and update content\n                if (\n                    this.context.themeSettings.haloAddToCartAction === 'sidebar'\n                ) {\n                    $('.modal-background').trigger('click');\n                    const options = {\n                        template: 'common/cart-preview',\n                    };\n                    const loadingClass = 'is-loading';\n                    const $body = $('body');\n                    const $cartDropdown = $('#cart-preview-dropdown');\n                    const $cartLoading = $(\n                        '<div class=\"loadingOverlay\"></div>'\n                    );\n\n                    $body.toggleClass('halo-open-side-cart');\n\n                    $cartDropdown.addClass(loadingClass).html($cartLoading);\n                    $cartLoading.show();\n\n                    utils.api.cart.getContent(options, (err, response) => {\n                        $cartDropdown.removeClass(loadingClass).html(response);\n                        $cartLoading.hide();\n\n                        const quantity =\n                            $(response)\n                                .find('[data-cart-quantity]')\n                                .data('cartQuantity') || 0;\n\n                        $body.trigger('cart-quantity-update', quantity);\n\n                        haloCalculateFreeShipping(this.context);\n                    });\n                } else if (\n                    this.context.themeSettings.haloAddToCartAction === 'popup'\n                ) {\n                    $('.modal-background').trigger('click');\n                    if (this.previewModal) {\n                        this.previewModal.open();\n                        this.updateCartContent(\n                            this.previewModal,\n                            response.data.cart_item.id,\n                            () =>\n                                this.previewModal.setupFocusableElements(\n                                    modalTypes.PRODUCT_DETAILS\n                                )\n                        );\n                        haloCalculateFreeShipping(this.context);\n                    } else {\n                        this.$overlay.show();\n                        // if no modal, redirect to the cart page\n                        this.redirectTo(\n                            response.data.cart_item.cart_url ||\n                                this.context.urls.cart\n                        );\n                    }\n                } else {\n                    this.$overlay.show();\n                    this.redirectTo(\n                        response.data.cart_item.cart_url ||\n                            this.context.urls.cart\n                    );\n                }\n            }\n        );\n\n        this.setLiveRegionAttributes($addToCartBtn.next(), 'status', 'polite');\n    }\n\n    /**\n     * Get cart contents\n     *\n     * @param {String} cartItemId\n     * @param {Function} onComplete\n     */\n    getCartContent(cartItemId, onComplete) {\n        const options = {\n            template: 'cart/preview',\n            params: {\n                suggest: cartItemId,\n            },\n            config: {\n                cart: {\n                    suggestions: {\n                        limit: 4,\n                    },\n                },\n            },\n        };\n\n        utils.api.cart.getContent(options, onComplete);\n    }\n\n    /**\n     * Redirect to url\n     *\n     * @param {String} url\n     */\n    redirectTo(url) {\n        if (this.isRunningInIframe() && !window.iframeSdk) {\n            window.top.location = url;\n        } else {\n            window.location = url;\n        }\n    }\n\n    /**\n     * Update cart content\n     *\n     * @param {Modal} modal\n     * @param {String} cartItemId\n     * @param {Function} onComplete\n     */\n    // updateCartContent(modal, cartItemId, onComplete) {\n    //     this.getCartContent(cartItemId, (err, response) => {\n    //         if (err) {\n    //             return;\n    //         }\n\n    //         modal.updateContent(response);\n\n    //         // Update cart counter\n    //         const $body = $('body');\n    //         const $cartQuantity = $('[data-cart-quantity]', modal.$content);\n    //         const $cartCounter = $('.navUser-action .cart-count');\n    //         const quantity = $cartQuantity.data('cartQuantity') || 0;\n    //         const $promotionBanner = $('[data-promotion-banner]');\n    //         const $backToShopppingBtn = $(\n    //             '.previewCartCheckout > [data-reveal-close]'\n    //         );\n    //         const $modalCloseBtn = $('#previewModal > .modal-close');\n    //         const bannerUpdateHandler = () => {\n    //             const $productContainer = $('#main-content > .container');\n\n    //             $productContainer.append(\n    //                 '<div class=\"loadingOverlay pdp-update\"></div>'\n    //             );\n    //             $('.loadingOverlay.pdp-update', $productContainer).show();\n    //             window.location.reload();\n    //         };\n\n    //         $cartCounter.addClass('cart-count--positive');\n    //         $body.trigger('cart-quantity-update', quantity);\n\n    //         if (onComplete) {\n    //             onComplete(response);\n    //         }\n\n    //         if ($promotionBanner.length && $backToShopppingBtn.length) {\n    //             $backToShopppingBtn.on('click', bannerUpdateHandler);\n    //             $modalCloseBtn.on('click', bannerUpdateHandler);\n    //         }\n    //     });\n    // }\n   //new lines added\n    updateCartContent(modal, cartItemId, onComplete) {\n        this.getCartContent(cartItemId, (err, response) => {\n            if (err) {\n                return;\n            }\n    \n            modal.updateContent(response);\n    \n            // Update cart counter\n            const $body = $('body');\n            const $cartQuantity = $('[data-cart-quantity]', modal.$content);\n            const $cartCounter = $('.navUser-action .cart-count');\n            \n            // Ensure quantity is parsed as a number and defaults to 0 if not found\n            const quantity = parseInt($cartQuantity.data('cart-quantity') || 0, 10);\n    \n            $cartCounter.text(quantity);\n            $cartCounter.toggleClass('cart-count--positive', quantity > 0);\n            $body.trigger('cart-quantity-update', quantity);\n    \n            if (onComplete) {\n                onComplete(response);\n            }\n    \n            const $promotionBanner = $('[data-promotion-banner]');\n            const $backToShopppingBtn = $('.previewCartCheckout > [data-reveal-close]');\n            const $modalCloseBtn = $('#previewModal > .modal-close');\n    \n            const bannerUpdateHandler = () => {\n                const $productContainer = $('#main-content > .container');\n                \n                $productContainer.append(\n                    '<div class=\"loadingOverlay pdp-update\"></div>'\n                );\n                $('.loadingOverlay.pdp-update', $productContainer).show();\n                window.location.reload();\n            };\n    \n            if ($promotionBanner.length && $backToShopppingBtn.length) {\n                $backToShopppingBtn.on('click', bannerUpdateHandler);\n                $modalCloseBtn.on('click', bannerUpdateHandler);\n            }\n        });\n    }\n\n    //new lines ended\n\n\n\n    /**\n     * Hide or mark as unavailable out of stock attributes if enabled\n     * @param  {Object} data Product attribute data\n     */\n    updateProductAttributes(data) {\n        super.updateProductAttributes(data);\n        this.showProductImage(data.image);\n    }\n    updateProductDetailsData() {\n        const $form = $('form[data-cart-item-add]');\n        const formDataItems = $form.serializeArray();\n\n        const productDetails = {};\n\n        for (const formDataItem of formDataItems) {\n            const { name, value } = formDataItem;\n\n            if (name === 'product_id') {\n                productDetails.productId = Number(value);\n            }\n\n            if (name === 'qty[]') {\n                productDetails.quantity = Number(value);\n            }\n\n            if (name.match(/attribute/)) {\n                const productOption = {\n                    optionId: Number(name.match(/\\d+/g)[0]),\n                    optionValue: value,\n                };\n\n                productDetails.optionSelections = productDetails?.optionSelections\n                    ? [...productDetails.optionSelections, productOption]\n                    : [productOption];\n            }\n        }\n\n        document.dispatchEvent(new CustomEvent('onProductUpdate', {\n            bubbles: true,\n            detail: { productDetails },\n        }));\n    }\n    /* Halothemes*/\n    soldProduct() {\n        var numbersProductS = this.context.themeSettings.number_products;\n        var numbersProductList = JSON.parse('[' + numbersProductS + ']');\n        var numbersProductItem = Math.floor(\n            Math.random() * numbersProductList.length\n        );\n        var numbersProduct = numbersProductList[numbersProductItem];\n\n        var numbersHoursS = this.context.themeSettings.number_hours;\n        var numbersHoursList = JSON.parse('[' + numbersHoursS + ']');\n        var numbersHoursItem = Math.floor(\n            Math.random() * numbersHoursList.length\n        );\n        var numbersHour = numbersHoursList[numbersProductItem];\n\n        var itemPrdsText = this.context.themeSettings.number_products_text;\n        var itemHoursText = this.context.themeSettings.number_hours_text;\n\n        $('.sold-product').html(\n            '<svg class=\"icon\" aria-hidden=\"true\"><use xlink:href=\"#icon-fire-2\"></use></svg> <span>' +\n                numbersProduct +\n                ' ' +\n                itemPrdsText +\n                ' ' +\n                numbersHour +\n                ' ' +\n                itemHoursText +\n                '</span>'\n        );\n        $('.sold-product').show();\n    }\n\n    viewingProduct() {\n        var ViewerText = this.context.themeSettings.halo_viewing_product_text;\n        var numbersViewer_text =\n            this.context.themeSettings.halo_viewing_product_viewer;\n        var numbersViewerList = JSON.parse('[' + numbersViewer_text + ']');\n        var timeViewer =\n            parseInt(this.context.themeSettings.halo_viewing_product_change) *\n            1000;\n\n        setInterval(function () {\n            var numbersViewerItem = Math.floor(\n                Math.random() * numbersViewerList.length\n            );\n\n            $('.viewing-product span').html(\n                numbersViewerList[numbersViewerItem] + ' ' + ViewerText\n            );\n            $('.viewing-product').show();\n        }, timeViewer);\n    }\n}\n","export default function(context, $productOptionsElement){\r\n    var productOption = $('.product-options');\r\n\r\n    $('document').ready(function(){\r\n    \tinitProductMoreview();\r\n\r\n    \t$productOptionsElement.on('change', event => {\r\n            const $changedOption = $(event.target);\r\n\r\n            // Do not trigger an ajax request if it's a file or if the browser doesn't support FormData\r\n            if ($changedOption.attr('type') === 'file' || window.FormData === undefined) {\r\n                return;\r\n            }\r\n\r\n            initProductMoreview($changedOption);\r\n        });\r\n    });\r\n\r\n    function initProductMoreview () {\r\n        var obj = context.themeSettings.variant_name.split(\",\");\r\n        var label = productOption.find('[data-product-option-change]').find('label.form-label--inlineSmall');\r\n        var className = '', classN = '.filter-';\r\n\r\n        label.each(function(i, el){\r\n            var lastElement = label.length - 1;\r\n            obj = $(el).parent('[data-product-attribute]');\r\n\r\n            if( obj != undefined ){\r\n                if( obj.data('product-attribute') == \"set-select\" ) {\r\n                    var inputChecked = obj.find(':selected');\r\n                } else {\r\n                    var inputChecked = obj.find(':checked');\r\n                }\r\n                \r\n                if( inputChecked != undefined && inputChecked != '' && inputChecked.length) {\r\n                    var clsName = inputChecked.data('filter');\r\n\r\n                    if (clsName != undefined) {\r\n                        clsName = clsName.replace('.filter-','');\r\n                        classN += clsName;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        console.log('classN',classN);\r\n\r\n        if( obj != undefined ){\r\n            if(classN !== '.filter-') {\r\n                className = classN;\r\n                if($(className,'.productView-title').length){\r\n                    $('.productView-title span').removeClass('is-visible');\r\n                    $('.productView-title .text').remove();\r\n                    $(className,'.productView-title').addClass('is-visible');\r\n                }\r\n                if($(className,'#tab-description').length){\r\n                    $('#tab-description').addClass('is-visible');\r\n                    $('#tab-description > div > div').removeClass('visible');\r\n                    $(className,'#tab-description').addClass('visible');\r\n                    // bomb edited custom \r\n                    $('#tab-description > div > .custom-variant').hide();\r\n                }\r\n                else{\r\n                    $('#tab-description > div > div').removeClass('visible');\r\n                    $('#tab-description > div > .custom-variant').show();\r\n                }\r\n            }\r\n            else{\r\n                $('#tab-description > div > :not([class*=\"filter-\"])').addClass('custom-variant');\r\n                $('#tab-description > div > div').removeClass('visible');\r\n            }\r\n        }\r\n    }\r\n}\r\n","export class VideoGallery {\n    constructor($element) {\n        this.$player = $element.find('[data-video-player]');\n        this.$videos = $element.find('[data-video-item]');\n        this.currentVideo = {};\n        this.bindEvents();\n    }\n\n    selectNewVideo(e) {\n        e.preventDefault();\n\n        const $target = $(e.currentTarget);\n\n        this.currentVideo = {\n            id: $target.data('videoId'),\n            $selectedThumb: $target,\n        };\n\n        this.setMainVideo();\n        this.setActiveThumb();\n    }\n\n    setMainVideo() {\n        this.$player.attr('src', `//www.youtube.com/embed/${this.currentVideo.id}`);\n    }\n\n    setActiveThumb() {\n        this.$videos.removeClass('is-active');\n        this.currentVideo.$selectedThumb.addClass('is-active');\n    }\n\n    bindEvents() {\n        this.$videos.on('click', this.selectNewVideo.bind(this));\n    }\n}\n\nexport default function videoGallery() {\n    const pluginKey = 'video-gallery';\n    const $videoGallery = $(`[data-${pluginKey}]`);\n\n    $videoGallery.each((index, element) => {\n        const $el = $(element);\n        const isInitialized = $el.data(pluginKey) instanceof VideoGallery;\n\n        if (isInitialized) {\n            return;\n        }\n\n        $el.data(pluginKey, new VideoGallery($el));\n    });\n}\n","import $ from 'jquery';\r\nimport utils from '@bigcommerce/stencil-utils';\r\nimport _ from 'lodash';\r\nimport haloCalculateFreeShipping from './haloCalculateFreeShipping';\r\n\r\nexport default function(context) {\r\n    const relate_tab = \"#tab-related\";\r\n    const $bundle = $('#halo-bundle-products');\r\n\r\n    showBundle();\r\n\r\n    $(document).on('click', '.halo-toggle-options', function(event) {\r\n        event.preventDefault();\r\n\r\n        $('.halo-toggle-options').not($(this)).removeClass('is-focus');\r\n        $('.halo-detail-options').not($(this).next('.halo-detail-options')).removeClass('is-open');\r\n\r\n        if (!$(this).next('.halo-detail-options').hasClass('is-open')) {\r\n            $(this).addClass('is-focus');\r\n            $(this).next('.halo-detail-options').addClass('is-open');\r\n        } else {\r\n            $(this).next('.halo-detail-options').removeClass('is-open');\r\n            $(this).removeClass('is-focus');\r\n        }\r\n    });\r\n\r\n    $(document).on('click', '.halo-option-close', function(event) {\r\n        event.preventDefault();\r\n\r\n        $('.halo-detail-options').removeClass('is-open');\r\n        $('.halo-toggle-options').removeClass('is-focus');\r\n    });\r\n\r\n    $(document).on('click', event => {\r\n        if ($('.halo-detail-options').hasClass('is-open')) {\r\n            if (($(event.target).closest('.halo-detail-options').length === 0) && ($(event.target).closest('.halo-toggle-options').length === 0)){\r\n                $('.halo-detail-options').removeClass('is-open');\r\n                $('.halo-toggle-options').removeClass('is-focus');\r\n            }\r\n        }\r\n    });\r\n\r\n    $(document).on('change', '.halo-detail-checkbox', function() {\r\n        var id = $(this).attr('id').replace('fbt_product', '');\r\n\r\n        if ($(this).is(':checked') == false) {\r\n            $('.halo-product-item[data-product-id=\"' + id + '\"]').removeClass('isChecked');\r\n        } else {\r\n            $('.halo-product-item[data-product-id=\"' + id + '\"]').addClass('isChecked');\r\n        }\r\n\r\n        totalPrice();\r\n    });\r\n\r\n    $(document).on('click', '#halo-addAll', function(event) {\r\n        const $form = $('form', $('#halo-bundle-products'));\r\n        var arrPro = new Array();\r\n\r\n        $('.halo-detail-checkbox').each(function(i, val) {\r\n            if ($(val).is(':checked')) {\r\n                arrPro.push(i);\r\n            }\r\n        });\r\n\r\n        var check = false;\r\n\r\n        if (arrPro.length > 0) {\r\n            check = checkProduct($form, arrPro);\r\n        }\r\n\r\n        if (check) {\r\n            if (arrPro.length > 0) {\r\n                $('#halo-bundle-products .loadingOverlay').show();\r\n\r\n                addToCart($form, 0, arrPro);\r\n            }\r\n        } else {\r\n            const errorMessage = 'Please make sure all options have been filled in.';\r\n\r\n            if (errorMessage) {\r\n                // Strip the HTML from the error message\r\n                const tmp = document.createElement('DIV');\r\n                tmp.innerHTML = errorMessage;\r\n\r\n                return alert(tmp.textContent || tmp.innerText);\r\n\r\n            }\r\n        }\r\n\r\n        event.preventDefault();\r\n    });\r\n\r\n    function showBundle() {\r\n        const options = {\r\n                template: {\r\n                    item: 'halothemes/product/halo-bundle-products-tmp',\r\n                    options: 'halothemes/product/halo-bundle-products-options',\r\n                },\r\n            };\r\n\r\n        var prodBundleId = [];\r\n\r\n        $('#halo-bundle-products').removeClass('halo-block-disable');\r\n\r\n        firstItem();\r\n\r\n        $('#halo-bundle-products .bundle-product-right').append('<div class=\"halo-product-total\"><div class=\"total-price\"><span class=\"text\">Total price:</span><span class=\"price\"></span></div><a class=\"button button--primary halo-product-total-button\" id=\"halo-addAll\">Add All To Cart</a></div>');\r\n\r\n        $.each(context.productCustomFields, function(index, obj) {\r\n            if (obj.name == '__bundleid') {\r\n                prodBundleId = JSON.parse('['+obj.value+']');\r\n            }\r\n        });\r\n\r\n        if ($('#halo-bundle-products').length > 0 && prodBundleId.length == 0) {\r\n            var num = 0;\r\n            var list = [];\r\n\r\n            $(relate_tab + ' .card').each(function(i, val) {\r\n                list.push({i:i, data: \"\"});\r\n\r\n                var pId = $(val).data('product-id');\r\n\r\n                if (pId != undefined) {\r\n                    utils.api.product.getById(pId, options, (err, response) => {\r\n                        if (err) {\r\n                            return false;\r\n                        }\r\n\r\n                        list.forEach(function(element) {\r\n                            if(element.i == i){\r\n                                element.data = response;\r\n                            }\r\n                        });\r\n                        \r\n                        num++;\r\n\r\n                        if(num == $(relate_tab + ' .card').length){\r\n                            showList(list);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        } else if ($('#halo-bundle-products').length > 0 && prodBundleId.length > 0) {\r\n            var num = 0;\r\n            var list = [];\r\n\r\n            $.each(prodBundleId, function(i, val){\r\n                list.push({i:i, data: \"\"});\r\n\r\n                var pId = prodBundleId[i];\r\n\r\n                if (pId != undefined) {\r\n                    utils.api.product.getById(pId, options, (err, response) => {\r\n                        if (err) {\r\n                            return false;\r\n                        }\r\n\r\n                        list.forEach(function(element) {\r\n                            if(element.i == i){\r\n                                element.data = response;\r\n                            }\r\n                        });\r\n                        \r\n                        num++;\r\n\r\n                        if(num == prodBundleId.length){\r\n                            showList(list);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    function firstItem(){\r\n        const firstItem = $('#halo-bundle-products .halo-product-list .halo-product-item:first-child'),\r\n            pId = firstItem.data('product-id'),\r\n            $form = firstItem.find('form'),\r\n            hasOptions = $form.find('[data-fbt-option-change]').length,\r\n            hasDefaultOptions = $form.find('[data-default]').length;\r\n\r\n        if (hasDefaultOptions && hasOptions) {\r\n            utils.api.productAttributes.optionChange(pId, $form.serialize(), 'products/bulk-discount-rates', (err, response) => {\r\n                const attributesData = response.data || {};\r\n                const attributesContent = response.content || {};\r\n\r\n                updateProductAttributes($form, attributesData);\r\n\r\n                if (hasDefaultOptions) {\r\n                    updateView($form, attributesData, attributesContent);\r\n                } else {\r\n                    updateDefaultAttributesForOOS(attributesData);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    function showList(list){\r\n        list.forEach(function(element) {\r\n            var response = element.data;\r\n\r\n            $('#halo-bundle-products .halo-product-list').append(response.item);\r\n\r\n            if (response.options.trim() != \"\") {\r\n                var pId = $(response.item).data('product-id');\r\n                const $form = $('#halo-bundle-products .halo-product-list .halo-product-item[data-product-id=\"' + pId + '\"] form');\r\n\r\n                $form.append(response.options);\r\n\r\n                const $productOptionsElement = $('[data-fbt-option-change]', $form);\r\n                const hasOptions = $productOptionsElement.html().trim().length;\r\n                const hasDefaultOptions = $(response.options).find('[data-default]').length;\r\n\r\n                if (hasDefaultOptions && hasOptions) {\r\n                    utils.api.productAttributes.optionChange(pId, $form.serialize(), 'products/bulk-discount-rates', (err, response) => {\r\n                        const attributesData = response.data || {};\r\n                        const attributesContent = response.content || {};\r\n\r\n                        updateProductAttributes($form, attributesData);\r\n\r\n                        if (hasDefaultOptions) {\r\n                            updateView($form, attributesData, attributesContent);\r\n                        } else {\r\n                            updateDefaultAttributesForOOS(attributesData);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                setProductVariant();\r\n            }\r\n        });\r\n\r\n        productOptions();\r\n        showSlickSlider();\r\n        totalPrice();\r\n    }\r\n\r\n    function showSlickSlider(){\r\n        $('#halo-bundle-products .halo-product-list').slick({\r\n            dots: true,\r\n            arrows: false,\r\n            slidesToShow: 2,\r\n            slidesToScroll: 1,\r\n            mobileFirst: true,\r\n            infinite: false,\r\n            nextArrow: \"<div class='slick-next slick-arrow'>next</div>\",\r\n            prevArrow: \"<div class='slick-prev slick-arrow'>prev</div>\",\r\n            responsive: [\r\n                {\r\n                    breakpoint: 1440,\r\n                    settings: {\r\n                        slidesToScroll: 1,\r\n                        slidesToShow: 4,\r\n                        dots: false,\r\n                        arrows: true\r\n                    }\r\n                },\r\n                {\r\n                    breakpoint: 1200,\r\n                    settings: {\r\n                        slidesToShow: 3,\r\n                        slidesToScroll: 1,\r\n                        dots: false,\r\n                        arrows: true\r\n                    }\r\n                },\r\n                {\r\n                    breakpoint: 992,\r\n                    settings: {\r\n                        slidesToShow: 4,\r\n                        slidesToScroll: 1\r\n                    }\r\n                },\r\n                {\r\n                    breakpoint: 640,\r\n                    settings: {\r\n                        slidesToShow: 3,\r\n                        slidesToScroll: 1\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n    }\r\n\r\n    function checkProduct(form, arrPro) {\r\n        var check = true;\r\n\r\n        for (var i = 0, len = arrPro.length; i < len; i++) {\r\n            var k = arrPro[i];\r\n            var $form = $(form[k]);\r\n            if ($form.find('[data-fbt-option-change]').length) {\r\n                check = checkBeforeAdd($form);\r\n                if (check == false)\r\n                    return false;\r\n            }\r\n        }\r\n        return check;\r\n    }\r\n\r\n    function checkBeforeAdd($attributes) {\r\n        var check = true;\r\n        $attributes.find('input:text, input:password, input:file, textarea').each(function() {\r\n\r\n            if (!$(this).prop('required')) {} else {\r\n                if ($(this).val()) {} else {\r\n                    $(this).focus();\r\n                    check = false;\r\n                }\r\n            }\r\n        });\r\n\r\n        $attributes.find('select').each(function() {\r\n\r\n            if (!$(this).prop('required')) {\r\n\r\n            } else {\r\n                if ($(this).val()) {} else {\r\n                    $(this).focus();\r\n                    check = false;\r\n                }\r\n            }\r\n        });\r\n\r\n        var att = \"\";\r\n        $attributes.find('input:radio, input:checkbox').each(function() {\r\n            if (att != $(this).attr(\"name\")) {\r\n\r\n                att = $(this).attr(\"name\");\r\n                if (!$(this).prop('required')) {\r\n                    if ($(this).attr(\"type\") == \"checkbox\") {\r\n                        if ($(\"[name='\" + att + \"']:checked\").val()) {}\r\n                    }\r\n                    if ($(this).attr(\"type\") == \"radio\") {\r\n                        if ($(\"[name='\" + att + \"']:checked\").val()) {}\r\n                    }\r\n                } else {\r\n                    if ($(this).attr(\"type\") == \"checkbox\") {\r\n                        if ($(\"[name='\" + att + \"']:checked\").val()) {} else {\r\n                            check = false;\r\n                        }\r\n                    }\r\n                    if ($(this).attr(\"type\") == \"radio\") {\r\n                        if ($(\"[name='\" + att + \"']:checked\").val()) {} else {\r\n                            check = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        return check;\r\n    }\r\n\r\n    function addToCart(form, i, arrP) {\r\n        if (i >= arrP.length) {\r\n            window.location = '/cart.php';\r\n            return;\r\n        }\r\n\r\n        if (window.FormData === undefined) {\r\n            return;\r\n        }\r\n\r\n        var k = arrP[i];\r\n        // Add item to cart\r\n        utils.api.cart.itemAdd(filterEmptyFilesFromForm(new FormData(form[k])), (err, response) => {\r\n            const errorMessage = err || response.data.error;\r\n\r\n            if (errorMessage) {\r\n                // Strip the HTML from the error message\r\n                const tmp = document.createElement('DIV');\r\n                tmp.innerHTML = errorMessage;\r\n                alert(tmp.textContent || tmp.innerText);\r\n            }\r\n\r\n            i++;\r\n\r\n            if (i >= arrP.length) {\r\n                $('#halo-bundle-products .loadingOverlay').hide();\r\n                updateCartContent(response.data.cart_item.id);\r\n\r\n                $('.modal-background').trigger('click');\r\n                const options = {\r\n                    template: 'common/cart-preview'\r\n                };\r\n                const loadingClass = 'is-loading';\r\n                const $body = $('body');\r\n                const $cartDropdown = $('#cart-preview-dropdown');\r\n                const $cartLoading = $('<div class=\"loadingOverlay\"></div>');\r\n\r\n                $body.toggleClass('halo-open-side-cart');\r\n\r\n                $cartDropdown\r\n                    .addClass(loadingClass)\r\n                    .html($cartLoading);\r\n                $cartLoading\r\n                    .show();\r\n\r\n                utils.api.cart.getContent(options, (err, response) => {\r\n                    $cartDropdown\r\n                        .removeClass(loadingClass)\r\n                        .html(response);\r\n                    $cartLoading\r\n                        .hide();\r\n\r\n                    const quantity = $(response).find('[data-cart-quantity]').data('cartQuantity') || 0;\r\n\r\n                    $body.trigger('cart-quantity-update', quantity);\r\n\r\n                    haloCalculateFreeShipping(this.context);\r\n                });\r\n\r\n                return;\r\n            }\r\n\r\n            addToCart(form, i, arrP);\r\n        });\r\n    }\r\n\r\n    function updateCartContent(cartItemId, onComplete) {\r\n        const $body = $('body');\r\n        const loadingClass = 'is-loading';\r\n        const $cartDropdown = $('#cart-preview-dropdown');\r\n        const $cartLoading = $('<div class=\"loadingOverlay\"></div>');\r\n        const $sideCartBlock = $('#sideBlock_cart');\r\n\r\n        $body.toggleClass('openCartSidebar is-side-block');\r\n        $sideCartBlock.toggleClass('is-open');\r\n\r\n        $cartDropdown\r\n            .addClass(loadingClass)\r\n            .html($cartLoading);\r\n        $cartLoading\r\n            .show();\r\n\r\n        getCartContent(cartItemId, (err, response) => {\r\n            if (err) {\r\n                return;\r\n            }\r\n\r\n            $cartDropdown\r\n                .removeClass(loadingClass)\r\n                .html(response);\r\n            $cartLoading\r\n                .hide();\r\n\r\n            const quantity = $(response).find('[data-cart-quantity]').data('cartQuantity') || 0;\r\n\r\n            $body.trigger('cart-quantity-update', quantity);\r\n            haloCalculateFreeShipping(context);\r\n\r\n            if (onComplete) {\r\n                onComplete(response);\r\n            }\r\n        });\r\n    }\r\n\r\n    function getCartContent(cartItemId, onComplete) {\r\n       const options = {\r\n            template: 'common/cart-preview'\r\n        };\r\n\r\n        utils.api.cart.getContent(options, onComplete);\r\n    }\r\n\r\n    function totalPrice() {\r\n        var total = 0,\r\n            pos = 0,\r\n            symbol = \"$\";\r\n\r\n        $('.halo-product-item.isChecked').each(function(i, val) {\r\n            var currency,\r\n                price, s;\r\n\r\n            if ($(val).find('.price-section .price.price--withTax').length){\r\n                currency = $(val).find('.price-section .price.price--withTax').text();\r\n            } else{\r\n                currency = $(val).find('.price-section .price.price--withoutTax').text();\r\n            }\r\n\r\n            price = parseFloat(currency.replace(/[^0-9.-]+/g, \"\"));\r\n\r\n            s = currency.replace(parseFloat(price).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\"), \"\");\r\n\r\n            if (isNaN(parseFloat(s.replace(/[^0-9.-]+/g, \"\")))){\r\n                symbol = s;\r\n            }\r\n\r\n            if (currency.indexOf(symbol) != -1){\r\n                pos = currency.indexOf(symbol);\r\n            }\r\n\r\n            total = total + price;\r\n        });\r\n\r\n        total = parseFloat(total).toFixed(2).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n\r\n        if (pos == 0){\r\n            total = symbol + total;\r\n        } else{\r\n            total = total + symbol;\r\n        }\r\n\r\n        $('.halo-product-total .price').html(total);\r\n    }\r\n\r\n    function productOptions() {\r\n        totalPrice();\r\n\r\n        const $form = $('form', $bundle);\r\n\r\n        const $productOptionsElement = $('[data-fbt-option-change]', $form);\r\n\r\n        $(document).on('change', '#halo-bundle-products form [data-fbt-option-change]', event => {\r\n            productOptionsChanged(event);\r\n            setProductVariant(event);\r\n        });\r\n    }\r\n\r\n    function setProductVariant() {\r\n        const unsatisfiedRequiredFields = [];\r\n        const options = [];\r\n\r\n        $.each($('[data-fbt-option-change] [data-product-attribute]'), (index, value) => {\r\n            const optionLabel = value.children[0].innerText;\r\n            const optionTitle = optionLabel.split(':')[0].trim();\r\n            const required = optionLabel.toLowerCase().includes('required');\r\n            const type = value.getAttribute('data-product-attribute');\r\n\r\n            if ((type === 'input-file' || type === 'input-text' || type === 'input-number') && value.querySelector('input').value === '' && required) {\r\n                unsatisfiedRequiredFields.push(value);\r\n            }\r\n\r\n            if (type === 'textarea' && value.querySelector('textarea').value === '' && required) {\r\n                unsatisfiedRequiredFields.push(value);\r\n            }\r\n\r\n            if (type === 'date') {\r\n                const isSatisfied = Array.from(value.querySelectorAll('select')).every((select) => select.selectedIndex !== 0);\r\n\r\n                if (isSatisfied) {\r\n                    const dateString = Array.from(value.querySelectorAll('select')).map((x) => x.value).join('-');\r\n                    options.push(`${optionTitle}:${dateString}`);\r\n\r\n                    return;\r\n                }\r\n\r\n                if (required) {\r\n                    unsatisfiedRequiredFields.push(value);\r\n                }\r\n            }\r\n\r\n            if (type === 'set-select') {\r\n                const select = value.querySelector('select');\r\n                const selectedIndex = select.selectedIndex;\r\n\r\n                if (selectedIndex !== 0) {\r\n                    options.push(`${optionTitle}:${select.options[selectedIndex].innerText}`);\r\n                    $(value.children[0]).find('[data-option-value]').text(select.options[selectedIndex].innerText);\r\n                    return;\r\n                }\r\n\r\n                if (required) {\r\n                    unsatisfiedRequiredFields.push(value);\r\n                }\r\n            }\r\n\r\n            if (type === 'set-rectangle' || type === 'set-radio' || type === 'swatch' || type === 'input-checkbox' || type === 'product-list') {\r\n                const checked = value.querySelector(':checked');\r\n                if (checked) {\r\n                    if (type === 'set-rectangle' || type === 'set-radio' || type === 'product-list') {\r\n                        const label = checked.labels[0].innerText;\r\n                        if (label) {\r\n                            options.push(`${optionTitle}:${label}`);\r\n                            $(value.children[0]).find('[data-option-value]').text(label);\r\n                        }\r\n                    }\r\n\r\n                    if (type === 'swatch') {\r\n                        const label = checked.labels[0].children[0];\r\n                        if (label) {\r\n                            options.push(`${optionTitle}:${label.title}`);\r\n                            $(value.children[0]).find('[data-option-value]').text(label.title);\r\n                        }\r\n                    }\r\n\r\n                    if (type === 'input-checkbox') {\r\n                        options.push(`${optionTitle}:Yes`);\r\n                    }\r\n\r\n                    return;\r\n                }\r\n\r\n                if (type === 'input-checkbox') {\r\n                    options.push(`${optionTitle}:No`);\r\n                }\r\n\r\n                if (required) {\r\n                    unsatisfiedRequiredFields.push(value);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function productOptionsChanged(event) {\r\n        const $changedOption = $(event.target);\r\n        const $form = $changedOption.parents('form');\r\n        const productId = $('[name=\"product_id\"]', $form).val();\r\n\r\n        if ($changedOption.attr('type') === 'file' || window.FormData === undefined) {\r\n            return;\r\n        }\r\n\r\n        if ($changedOption.attr('id') === 'fbt_product' + productId) {\r\n            return;\r\n        }\r\n        \r\n        utils.api.productAttributes.optionChange(productId, $form.serialize(), 'products/bulk-discount-rates', (err, response) => {\r\n            const productAttributesData = response.data || {};\r\n            const productAttributesContent = response.content || {};\r\n            showProductImage(productId, productAttributesData);\r\n            updateProductAttributes($form, productAttributesData);\r\n            updateView($form, productAttributesData, productAttributesContent);\r\n            totalPrice();\r\n        });\r\n\r\n        return false;\r\n    }\r\n    \r\n    function updateProductAttributes($scope, data) {\r\n        const behavior = data.out_of_stock_behavior;\r\n        const inStockIds = data.in_stock_attributes;\r\n        const outOfStockMessage = ` (${data.out_of_stock_message})`;\r\n\r\n        if (behavior !== 'hide_option' && behavior !== 'label_option') {\r\n            return;\r\n        }\r\n\r\n        $('[data-product-attribute-value]', $scope).each((i, attribute) => {\r\n            const $attribute = $(attribute);\r\n            const attrId = parseInt($attribute.data('productAttributeValue'), 10);\r\n\r\n            if (inStockIds.indexOf(attrId) !== -1) {\r\n                enableAttribute($attribute, behavior, outOfStockMessage);\r\n            } else {\r\n                disableAttribute($attribute, behavior, outOfStockMessage);\r\n            }\r\n        });\r\n    }\r\n\r\n    function disableAttribute($attribute, behavior, outOfStockMessage) {\r\n        if (getAttributeType($attribute) === 'set-select') {\r\n            return disableSelectOptionAttribute($attribute, behavior, outOfStockMessage);\r\n        }\r\n\r\n        if (behavior === 'hide_option') {\r\n            $attribute.hide();\r\n        } else {\r\n            $attribute.addClass('unavailable');\r\n        }\r\n    }\r\n\r\n    function disableSelectOptionAttribute($attribute, behavior, outOfStockMessage) {\r\n        const $select = $attribute.parent();\r\n\r\n        if (behavior === 'hide_option') {\r\n            $attribute.toggleOption(false);\r\n\r\n            if ($select.val() === $attribute.attr('value')) {\r\n                $select[0].selectedIndex = 0;\r\n            }\r\n        } else {\r\n            $attribute.attr('disabled', 'disabled');\r\n            $attribute.html($attribute.html().replace(outOfStockMessage, '') + outOfStockMessage);\r\n        }\r\n    }\r\n\r\n    function enableAttribute($attribute, behavior, outOfStockMessage) {\r\n        if (getAttributeType($attribute) === 'set-select') {\r\n            return enableSelectOptionAttribute($attribute, behavior, outOfStockMessage);\r\n        }\r\n\r\n        if (behavior === 'hide_option') {\r\n            $attribute.show();\r\n        } else {\r\n            $attribute.removeClass('unavailable');\r\n        }\r\n    }\r\n\r\n    function enableSelectOptionAttribute($attribute, behavior, outOfStockMessage) {\r\n        if (behavior === 'hide_option') {\r\n            $attribute.toggleOption(true);\r\n        } else {\r\n            $attribute.prop('disabled', false);\r\n            $attribute.html($attribute.html().replace(outOfStockMessage, ''));\r\n        }\r\n    }\r\n\r\n    function getAttributeType($attribute) {\r\n        const $parent = $attribute.closest('[data-product-attribute]');\r\n\r\n        return $parent ? $parent.data('productAttribute') : null;\r\n    }\r\n\r\n    function showProductImage(productId, data) {\r\n        if (_.isPlainObject(data.image)) {\r\n            const mainImageUrl = utils.tools.image.getSrc(\r\n                data.image.data,\r\n                context.themeSettings.productgallery_size\r\n            );\r\n\r\n            $('.halo-product-item[data-product-id=\"' + productId + '\"]').find('img').attr({\r\n                'srcset': mainImageUrl,\r\n                'data-srcset': $(this).attr('srcset'),\r\n            });\r\n\r\n        } else {\r\n            const mainImageUrl = $('.halo-product-item[data-product-id=\"' + productId + '\"]').find('img').attr('data-srcset');\r\n            $('.halo-product-item[data-product-id=\"' + productId + '\"]').find('img').attr({\r\n                'srcset': mainImageUrl,\r\n                'data-srcset': $(this).attr('srcset'),\r\n            });\r\n        }\r\n    }\r\n\r\n    function updateView($scope, data, content = null) {\r\n        const viewModel = getViewModel($scope);\r\n\r\n        showMessageBox(data.stock_message || data.purchasing_message);\r\n\r\n        if (_.isObject(data.price)) {\r\n            updatePriceView(viewModel, data.price);\r\n        }\r\n\r\n        var productId = $('[name=\"product_id\"]', $scope).val();\r\n\r\n        if (!data.purchasable || !data.instock) {\r\n            $('.halo-product-item[data-product-id=\"' + productId + '\"]').removeClass('isChecked');\r\n\r\n            $('#fbt_product' + productId).prop('checked', false).prop('disabled', true);\r\n\r\n            $('.halo-product-item[data-product-id=\"' + productId + '\"]').removeClass('hasOptions--selected');\r\n        } else {\r\n            $('.halo-product-item[data-product-id=\"' + productId + '\"]').addClass('isChecked');\r\n\r\n            $('#fbt_product' + productId).prop('checked', true).prop('disabled', false);\r\n\r\n            if ($scope.find('[data-fbt-option-change]').length) {\r\n                var check = checkBeforeAdd($scope);\r\n\r\n                if (check == true) {\r\n                    $('.halo-product-item[data-product-id=\"' + productId + '\"]').addClass('hasOptions--selected');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function updateDefaultAttributesForOOS($scope, data) {\r\n        var productId = $('[name=\"product_id\"]', $scope).val();\r\n\r\n        if (!data.purchasable || !data.instock) {\r\n            $('.halo-product-item[data-product-id=\"' + productId + '\"]').removeClass('isChecked');\r\n            $('#fbt_product' + productId).prop('checked', false).prop('disabled', true);\r\n            $('.halo-product-item[data-product-id=\"' + productId + '\"]').removeClass('hasOptions--selected');\r\n        } else {\r\n            $('.halo-product-item[data-product-id=\"' + productId + '\"]').addClass('isChecked');\r\n            $('#fbt_product' + productId).prop('checked', true).prop('disabled', false);\r\n\r\n            if ($scope.find('[data-fbt-option-change]').length) {\r\n                var check = checkBeforeAdd($scope);\r\n\r\n                if (check == true) {\r\n                    $('.halo-product-item[data-product-id=\"' + productId + '\"]').addClass('hasOptions--selected');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function getViewModel($scope) {\r\n        return {\r\n            $priceWithTax: $('[data-product-price-with-tax]', $scope),\r\n            $priceWithoutTax: $('[data-product-price-without-tax]', $scope),\r\n            rrpWithTax: {\r\n                $div: $('.rrp-price--withTax', $scope),\r\n                $span: $('[data-product-rrp-with-tax]', $scope),\r\n            },\r\n            rrpWithoutTax: {\r\n                $div: $('.rrp-price--withoutTax', $scope),\r\n                $span: $('[data-product-rrp-price-without-tax]', $scope),\r\n            },\r\n            nonSaleWithTax: {\r\n                $div: $('.non-sale-price--withTax', $scope),\r\n                $span: $('[data-product-non-sale-price-with-tax]', $scope),\r\n            },\r\n            nonSaleWithoutTax: {\r\n                $div: $('.non-sale-price--withoutTax', $scope),\r\n                $span: $('[data-product-non-sale-price-without-tax]', $scope),\r\n            },\r\n            priceSaved: {\r\n                $div: $('.price-section--saving', $scope),\r\n                $span: $('[data-product-price-saved]', $scope),\r\n            },\r\n            priceNowLabel: {\r\n                $span: $('.price-now-label', $scope),\r\n            },\r\n            priceLabel: {\r\n                $span: $('.price-label', $scope),\r\n            },\r\n            $weight: $('.productView-info [data-product-weight]', $scope),\r\n            $increments: $('.form-field--increments :input', $scope),\r\n            $addToCart: $('#form-action-addToCart', $scope),\r\n            $wishlistVariation: $('[data-wishlist-add] [name=\"variation_id\"]', $scope),\r\n            stock: {\r\n                $container: $('.form-field--stock', $scope),\r\n                $input: $('[data-product-stock]', $scope),\r\n            },\r\n            $sku: $('[data-product-sku]'),\r\n            $upc: $('[data-product-upc]'),\r\n            $mpn: $('[data-product-mpn]'),\r\n            quantity: {\r\n                $text: $('.incrementTotal', $scope),\r\n                $input: $('[name=qty\\\\[\\\\]]', $scope),\r\n            },\r\n            $bulkPricing: $('.productView-info-bulkPricing', $scope),\r\n        };\r\n    }\r\n\r\n    function showMessageBox(message) {\r\n        const $messageBox = $('.productAttributes-message');\r\n\r\n        if (message) {\r\n            $('.alertBox-message', $messageBox).text(message);\r\n            $messageBox.show();\r\n        } else {\r\n            $messageBox.hide();\r\n        }\r\n    }\r\n\r\n    function clearPricingNotFound(viewModel) {\r\n        viewModel.rrpWithTax.$div.hide();\r\n        viewModel.rrpWithoutTax.$div.hide();\r\n        viewModel.nonSaleWithTax.$div.hide();\r\n        viewModel.nonSaleWithoutTax.$div.hide();\r\n        viewModel.priceSaved.$div.hide();\r\n        viewModel.priceNowLabel.$span.hide();\r\n        viewModel.priceLabel.$span.hide();\r\n    }\r\n    \r\n    function updatePriceView(viewModel, price) {\r\n        clearPricingNotFound(viewModel);\r\n\r\n        if (price.with_tax) {\r\n            viewModel.priceLabel.$span.show();\r\n            viewModel.$priceWithTax.html(price.with_tax.formatted);\r\n        }\r\n\r\n        if (price.without_tax) {\r\n            viewModel.priceLabel.$span.show();\r\n            viewModel.$priceWithoutTax.html(price.without_tax.formatted);\r\n        }\r\n\r\n        if (price.rrp_with_tax) {\r\n            viewModel.rrpWithTax.$div.show();\r\n            viewModel.rrpWithTax.$span.html(price.rrp_with_tax.formatted);\r\n        }\r\n\r\n        if (price.rrp_without_tax) {\r\n            viewModel.rrpWithoutTax.$div.show();\r\n            viewModel.rrpWithoutTax.$span.html(price.rrp_without_tax.formatted);\r\n        }\r\n\r\n        if (price.saved) {\r\n            viewModel.priceSaved.$div.show();\r\n            viewModel.priceSaved.$span.html(price.saved.formatted);\r\n        }\r\n\r\n        if (price.non_sale_price_with_tax) {\r\n            viewModel.priceLabel.$span.hide();\r\n            viewModel.nonSaleWithTax.$div.show();\r\n            viewModel.priceNowLabel.$span.show();\r\n            viewModel.nonSaleWithTax.$span.html(price.non_sale_price_with_tax.formatted);\r\n        }\r\n\r\n        if (price.non_sale_price_without_tax) {\r\n            viewModel.priceLabel.$span.hide();\r\n            viewModel.nonSaleWithoutTax.$div.show();\r\n            viewModel.priceNowLabel.$span.show();\r\n            viewModel.nonSaleWithoutTax.$span.html(price.non_sale_price_without_tax.formatted);\r\n        }\r\n    }\r\n\r\n    function filterEmptyFilesFromForm(formData) {\r\n        try {\r\n            for (const [key, val] of formData) {\r\n                if (val instanceof File && !val.name && !val.size) {\r\n                    formData.delete(key);\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.error(e);\r\n        }\r\n\r\n        return formData;\r\n    }\r\n}\r\n","/*\n Import all product specific js\n */\n import PageManager from './page-manager';\n import Review from './product/reviews';\n import collapsibleFactory from './common/collapsible';\n import ProductDetails from './common/product-details';\n import videoGallery from './product/video-gallery';\n import { classifyForm } from './common/utils/form-utils';\n import modalFactory, { modalTypes } from './global/modal';\n import haloBundleProducts from './halothemes/haloBundleProducts';\n import haloStickyAddToCart from './halothemes/haloStickyAddToCart';\n import haloPrevNextProduct from './halothemes/haloPrevNextProduct';\n \n const { WRITE_REVIEW } = modalTypes;\n \n export default class Product extends PageManager {\n     constructor(context) {\n         super(context);\n         this.url = window.location.href;\n         this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\n         this.$bulkPricingLink = $('[data-reveal-id=\"modal-bulk-pricing\"]');\n         this.reviewModal = modalFactory('#modal-review-form')[0];\n     }\n \n     onReady() {\n         const context = this.context;\n         const token = context.token;\n         // Listen for foundation modal close events to sanitize URL after review.\n         $(document).on('close.fndtn.reveal', () => {\n             if (this.url.indexOf('#write_review') !== -1 && typeof window.history.replaceState === 'function') {\n                 window.history.replaceState(null, document.title, window.location.pathname);\n             }\n         });\n \n         let validator;\n \n         // Init collapsible\n         collapsibleFactory();\n \n         this.productDetails = new ProductDetails($('.productView'), this.context, window.BCData.product_attributes);\n         this.productDetails.setProductVariant();\n \n         videoGallery();\n \n         this.bulkPricingHandler();\n         this.hlGlobal();\n         haloStickyAddToCart();\n         this.hideOptionNoPurchasable();\n\n         if (this.context.themeSettings.halo_bundle_products_enable == true) {\n             haloBundleProducts(this.context);   \n         }\n         haloPrevNextProduct(this.context);\n \n         const $reviewForm = classifyForm('.writeReview-form');\n \n         if ($reviewForm.length === 0) return;\n \n         const review = new Review($reviewForm);\n \n         $(document).on('opened.fndtn.reveal', '#modal-review-form', () => this.reviewModal.setupFocusableElements(WRITE_REVIEW));\n       \n        $(\"#stamped-badge-widget\").appendTo('#productView-widget');\n        \n         $('body').on('click', '[data-reveal-id=\"modal-review-form\"]', () => {\n             validator = review.registerValidation(this.context);\n             this.ariaDescribeReviewInputs($reviewForm);\n         });\n         $reviewForm.on('submit', () => {\n             if (validator) {\n                 validator.performCheck();\n                 return validator.areAll('valid');\n             }\n \n             return false;\n         });\n \n         this.productReviewHandler();\n     }\n \n     ariaDescribeReviewInputs($form) {\n         $form.find('[data-input]').each((_, input) => {\n             const $input = $(input);\n             const msgSpanId = `${$input.attr('name')}-msg`;\n \n             $input.siblings('span').attr('id', msgSpanId);\n             $input.attr('aria-describedby', msgSpanId);\n         });\n     }\n \n     productReviewHandler() {\n         if (this.url.indexOf('#write_review') !== -1) {\n             this.$reviewLink.trigger('click');\n         }\n     }\n \n     bulkPricingHandler() {\n         if (this.url.indexOf('#bulk_pricing') !== -1) {\n             this.$bulkPricingLink.trigger('click');\n         }\n     }\n \n     hlGlobal() {\n         const wWidth = window.innerWidth;\n         const $desTab = $('.productView-description');\n         const $infoTab = $('#tab-additional-information');\n \n         if ($desTab.length && wWidth < 1025) {\n             $('.tab-content.is-active', $desTab).find('.tabContent').slideDown();\n         }\n \n         if ($infoTab.length) {\n             if ($infoTab.find('.tabContent').text().trim() == '') {\n                 $('[href=\"#tab-additional-information\"]').parent().hide();\n                 $infoTab.hide();\n             } \n         }\n \n         //\n         // Load Tabs\n         // -----------------------------------------------------------------------------\n         const $loadTabBtn = $('[data-tab-load]');\n \n         \n         const $firstTab = $('.first-tab');\n \n         const check_loadTabFirst = $firstTab.data('tab-check');\n \n         if (check_loadTabFirst) {\n             $firstTab.data('tab-check', false);\n             const url_loadTab = $firstTab.data('tab-load');\n             const thisTab = $firstTab.attr('href');\n             const $thisTab = $(thisTab+' .tabContent');\n \n             $.get(url_loadTab, function(data) {\n                 $('.icon-loading', $thisTab).remove();\n                 $thisTab.append($(data).find('.page-content').html());\n             }).fail(function(err) {\n                 $('.icon-loading', $thisTab).remove();\n                 $thisTab.append(\"<p>To Be Updated</p>\");\n             });\n         }\n \n         $loadTabBtn.on('click', (e) => {\n             e.preventDefault();\n             const $target = $(e.currentTarget);\n \n             const check_loadTab = $target.data('tab-check');\n \n             if (check_loadTab) {\n                 $target.data('tab-check', false);\n                 const url_loadTab = $target.data('tab-load');\n                 const thisTab = $target.attr('href');\n                 const $thisTab = $(thisTab+' .tabContent');\n \n                 $.get(url_loadTab, function(data) {\n                     $('.icon-loading', $thisTab).remove();\n                     $thisTab.append($(data).find('.page-content').html());\n                 }).fail(function(err) {\n                     $('.icon-loading', $thisTab).remove();\n                     $thisTab.append(\"<p>To Be Updated</p>\");\n                 });\n             }\n         });\n \n         //\n         // Tabs Mobile\n         // -----------------------------------------------------------------------------\n         const $btnTabMobile = $('.tab-titleMobile');\n \n         $btnTabMobile.on('click', (e) => {\n             e.preventDefault();\n             const $target = $(e.currentTarget);\n             const idTab = $target.attr('href');\n             const thisTop = $('.productView-description').offset().top - 20;\n \n             if ($target.hasClass('is-active')) {\n                 $target.removeClass('is-active');\n                 $(idTab).removeClass('is-active').find('.tabContent').slideUp();\n             }\n             else {\n                 const $tabActiveMobile = $('.productView-description .tabs-contents .tab-content.is-active');\n \n                 $btnTabMobile.removeClass('is-active');\n                 $target.addClass('is-active');\n                 $tabActiveMobile.removeClass('is-active').find('.tabContent').slideUp();\n                 $(idTab).addClass('is-active').find('.tabContent').slideDown();\n \n                 $('body,html').animate({\n                     scrollTop: thisTop\n                 }, 1000);\n             }\n         });\n \n         //\n         // Share Link\n         // -----------------------------------------------------------------------------\n         const $shareLinkBtn = $('.socialMedia-button');\n         const $shareLinkPopup = $('.socialMedia-dropdown');\n         const $shareLinkClose = $('.shareLinkSocial__close');\n         const $shareLinkCopy = $('#shareLinkSocial__copy');\n \n         $shareLinkBtn.on('click', (e) => {\n             e.preventDefault();\n \n             if ($shareLinkPopup.hasClass('is-open')) {\n                 $shareLinkPopup.slideUp(200);\n                 $shareLinkPopup.removeClass('is-open');\n             }\n             else {\n                 $shareLinkPopup.slideDown(200);\n                 $shareLinkPopup.addClass('is-open');            \n             }\n         });\n \n         $shareLinkClose.on('click', (e) => {\n             e.preventDefault();\n \n             if ($shareLinkPopup.hasClass('is-open')) {\n                 $shareLinkPopup.slideUp(200);\n                 $shareLinkPopup.removeClass('is-open');\n             }\n         });\n \n         $shareLinkCopy.on('click', (e) => {\n             e.preventDefault();\n             const $target = $(e.target);\n \n             $target.select();\n             document.execCommand(\"copy\");\n         });\n \n         //\n         // Body Close\n         // -----------------------------------------------------------------------------\n         $(document).on('click', (e) => {\n             const $target = $(e.target);\n             const $shareLinkPopup = $('.socialMedia-dropdown');\n \n             if ($target.closest('.social-mediaBlock').length === 0) {\n                 if ($shareLinkPopup.hasClass('is-open')) {\n                     $shareLinkPopup.slideUp(200);\n                     $shareLinkPopup.removeClass('is-open');\n                 }\n             }\n         });\n \n         /* Custom Details Tab */\n         // $('.productView-description .product-details-tab').appendTo('.productView-description #tab-custom-detail .tabContent'); \n         //     if($(\".productView-description #tab-custom-detail\").text().trim()==\"\"){\n         //     $(\".productView-description .tab.first-tab\").hide();\n         // }\n \n         /* Custom Link Tab */\n         $('.productView-description .product-link-tab').appendTo('.productView-description #tab-custom-document .tabContent'); \n             if($(\".productView-description #tab-custom-document\").text().trim()==\"\"){\n             $(\".productView-description .tab.first-tab\").hide();\n         }\n     }\n     hideOptionNoPurchasable() {\n         const productID = document.querySelector('.productView').getAttribute('data-productId');\n \n         this.getProductOptions(productID).then(data => {\n             const product = data.data.site.products.edges[0].node,\n                 optionsList = product.variants.edges;\n \n             optionsList.forEach(variant => {\n                 const isPurchasable = variant.node.isPurchasable;\n \n                 if (!isPurchasable) {\n                     /* Hide variant cannot purchase */\n                     const variantId = variant.node.entityId;\n                     const variantOptions = variant.node.productOptions.edges;\n \n                     variantOptions.forEach(option => {\n                         const optionsList = option.node.values.edges;\n \n                         optionsList.forEach(optionValue => {\n                             const optionValueId = optionValue.node.entityId;\n                             const optionValueElement = document.querySelector(`[data-product-attribute-value=\"${optionValueId}\"]`);\n \n                             if (!optionValue.node.isDefault) {\n                                 optionValueElement.remove();\n                             }\n                         });\n                     });\n                 }\n             });\n         })\n     }\n     /* Hide option no Purchasable */\n     getProductOptions(productID) {\n         return fetch('/graphql', {\n             method: 'POST',\n             headers: {\n               'Content-Type': 'application/json',\n               'Authorization': 'Bearer ' + this.context.token\n             },\n             body: JSON.stringify({\n               query: `\n                 query ExtendedProductsById {\n                     site {\n                         products(entityIds: [`+productID+`], first: 50) {\n                             edges {\n                                 node {\n                                     entityId\n                                     name\n                                     defaultImage{\n                                         urlOriginal\n                                     }\n                                     variants(first: 50){\n                                         edges{\n                                             node{\n                                                 entityId\n                                                 defaultImage{\n                                                     urlOriginal\n                                                 }\n                                                 productOptions(first: 50) {\n                                                     edges {\n                                                         node {\n                                                             entityId\n                                                             displayName\n                                                             isRequired\n                                                             ... on MultipleChoiceOption {\n                                                                 displayStyle\n                                                                 values {\n                                                                     edges {\n                                                                         node {\n                                                                             entityId\n                                                                             label\n                                                                             isDefault\n                                                                             ... on SwatchOptionValue {\n                                                                                 hexColors\n                                                                                 imageUrl(width: 150)\n                                                                             }\n                                                                         }\n                                                                     }\n                                                                 }\n                                                             }\n                                                         }\n                                                     }\n                                                 }\n                                                 isPurchasable\n                                             }\n                                         }\n                                     }\n                                 }\n                             }\n                         \n                         }\n                     }\n                 }`\n                 }),\n             }).then(res => res.json())\n     }\n }\n \n","import $ from 'jquery';\r\nimport utils from '@bigcommerce/stencil-utils';\r\nimport swal from 'sweetalert2';\r\nimport _ from 'lodash';\r\n\r\nexport default function(){\r\n    if ($('#form-action-addToCart').length) {\r\n        var scroll = $('#form-action-addToCart').offset();\r\n        var scrollTop = scroll.top;\r\n\r\n        $(window).scroll(function(){\r\n            if($(window).scrollTop() > scrollTop){\r\n                if(!$('#sticky_addtocart').hasClass('show_sticky')){\r\n                    var heightHeader = $('.header').height();\r\n                    $('#sticky_addtocart').addClass('show_sticky');\r\n                    // if ($('.header').hasClass('is-sticky')) {\r\n                    //     $('#sticky_addtocart').css('top', heightHeader);\r\n                    // } else {\r\n                    //     $('#sticky_addtocart').css('top', '0px');\r\n                    // }\r\n                }\r\n            } else{\r\n                $('#sticky_addtocart').removeClass('show_sticky');\r\n                $('.pop-up-option').removeClass('is-open');\r\n                $('.choose_options_add').removeClass('is-active');\r\n            }\r\n        });\r\n\r\n        $(document).on('click','.choose_options_add', function(event){\r\n            $(this).toggleClass('is-active');\r\n            $('.pop-up-option').toggleClass('is-open');\r\n        });\r\n\r\n        $(document).on('click','.pop-up-option .close', function(event){\r\n            $(\".pop-up-option\").removeClass('is-open');\r\n            $('.choose_options_add').removeClass('is-active');\r\n        });\r\n\r\n        window.onload = function(){\r\n            if($(window).scrollTop() > scrollTop){\r\n                if(!$('#sticky_addtocart').hasClass('show_sticky')){\r\n                    var heightHeader = $('.header').height();\r\n                    $('#sticky_addtocart').addClass('show_sticky');\r\n                    // if ($('.header').hasClass('is-sticky')) {\r\n                    //     $('#sticky_addtocart').css('top', heightHeader);\r\n                    // } else {\r\n                    //     $('#sticky_addtocart').css('top', '0px');\r\n                    // }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n}\r\n","import utils from '@bigcommerce/stencil-utils';\r\n\r\nexport default function(context) {\r\n    if (context.themeSettings.halo_prev_next_product == true) {\r\n        if ($(window).width() > 1024) {\r\n            if ($('.productView-nextProducts').length) {\r\n                var productId = $('.productView-nextProducts').data('product-id'),\r\n                    nextId = productId + 1,\r\n                    prevId = productId - 1,\r\n                    nextLink, prevLink;\r\n\r\n                const $prodWrap = $('.productView-nextProducts .next-prev-modal'),\r\n                    $prodIcons = $('.productView-nextProducts .next-prev-icons'),\r\n                    $options = {\r\n                        template: 'halothemes/product/halo-prev-next-product-tpm'\r\n                    };\r\n\r\n                if(nextId != undefined){\r\n                    utils.api.product.getById(nextId, $options, (err, response) => {\r\n                        if(err){\r\n                            return false;\r\n                        }\r\n                        nextLink = $(response).find('.card-link').attr('href');\r\n\r\n                        if(nextLink != undefined && nextLink != ''){\r\n                            $prodIcons.find('.next-icon').attr('href', nextLink);\r\n                            $prodIcons.find('.next-icon').removeClass('disable');\r\n                            $prodWrap.find('#next-product-modal').append(response);\r\n                        }\r\n                    });            \r\n                }\r\n\r\n                if(prevId != undefined){\r\n                    utils.api.product.getById(prevId, $options, (err, response) => {\r\n                        if(err){\r\n                            return false;\r\n                        }\r\n\r\n                        prevLink = $(response).find('.card-link').attr('href');\r\n                        \r\n                        if(prevLink != undefined && prevLink != ''){\r\n                            $prodIcons.find('.prev-icon').attr('href', prevLink);\r\n                            $prodIcons.find('.prev-icon').removeClass('disable');\r\n                            $prodWrap.find('#prev-product-modal').append(response);\r\n                        }\r\n                    });            \r\n                }\r\n\r\n                $prodIcons.on('mouseover', function(){\r\n                    $prodWrap.addClass('is-active');\r\n                })\r\n                .on('mouseleave', function(){\r\n                    $prodWrap.removeClass('is-active');\r\n                });\r\n\r\n                $('.next-icon', $prodIcons).on('mouseover', function(){\r\n                    if (!$(this).hasClass('disable')) {\r\n                        $('#prev-product-modal').removeClass('is-show');\r\n                        $('#next-product-modal').addClass('is-show');\r\n                    }\r\n                    else {\r\n                        $('#prev-product-modal').removeClass('is-show');\r\n                    }\r\n                });\r\n\r\n                $('.prev-icon', $prodIcons).on('mouseover', function(){\r\n                    if (!$(this).hasClass('disable')) {\r\n                        $('#next-product-modal').removeClass('is-show');\r\n                        $('#prev-product-modal').addClass('is-show');  \r\n                    }\r\n                    else {\r\n                        $('#next-product-modal').removeClass('is-show');\r\n                    }\r\n                });\r\n\r\n                $prodWrap.on('mouseover', function(){\r\n                    $prodWrap.addClass('is-active');\r\n                })\r\n                .on('mouseleave', function(){\r\n                    $prodWrap.removeClass('is-active');\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n"],"names":["safeString","str","DOMParser","parseFromString","body","textContent","_default","$reviewForm","this","validator","nod","submit","find","tap","announceInputErrorMessage","$reviewsContent","$","$collapsible","initLinkBind","injectPaginationLink","collapseReviews","_proto","prototype","_this","$content","on","trigger","hasClass","CollapsibleEvents","click","window","location","hash","indexOf","$nextLink","$prevLink","length","attr","registerValidation","context","add","selector","validate","errorMessage","reviewRating","reviewSubject","reviewComment","cb","val","forms","email","reviewEmail","performCheck","ImageGallery","$gallery","$mainImage","$mainImageNested","$selectableImages","$swipThumbnails","currentImage","init","bindEvents","fancyboxZoom","matchMedia","addEventListener","setImageZoom","error","console","setMainImage","imgObj","Object","assign","setActiveThumb","swapMainImage","setAlternateImage","savedImage","mainImageUrl","zoomImageUrl","mainImageSrcset","$selectedThumb","restoreImage","fancybox","buttons","selectNewImage","e","preventDefault","$target","currentTarget","mainImageAlt","children","first","selectNewImage2","removeClass","addClass","isBrowserIE","navigator","userAgent","includes","easyzoom","data","swap","href","src","srcset","alt","title","fallbackStylesIE","css","checkImage","$imageContainer","containerHeight","height","containerWidth","width","$image","$zoom","hide","_this2","easyZoom","onShow","errorNotice","loadingNotice","bind","productAttributes","price","price_range","without_tax","value","with_tax","evt","CustomEvent","detail","amount","dispatchEvent","container_div","haloGallery","g_objGallery","g_options","gallery","customOptions","jQuery","extend","round","ops","url","content","u_content","type","thumbnail","u_thumbnail","push","reround","pp","c","i","stt","prev","next","addPopview","cur","map","cthis","aview","ar","num","ob_sct","html","current","ve","ob_e","eq","animate","time","remove","s","append","show","ob","ob_ccontent","ob_content","view_slide","s1","s2","each","v","di","draw_slide","set","index","replace","fn","vGallery","options","element","brand","text","b","document","ready","gridpanel_vertical_scroll","ProductDetails","_ProductDetailsBase","$scope","productAttributesData","call","$overlay","imageGallery","listenQuantityChange","$swatchOptionMessage","swatchOptionMessageInitText","GalleryPopup","soldProduct","$form","$productOptionsElement","hasOptions","trim","hasDefaultOptions","$productSwatchGroup","showSwatchNames","_ref","target","showSwatchNameOnOption","_","is","event","productOptionsChanged","setProductVariant","setProductVariant2","productOption","initProductMoreview","obj","themeSettings","variant_name","split","label","className","classN","el","undefined","parent","inputChecked","clsName","log","FormData","additionalProductColors","addProductToCart","$form2","productOptionsChanged2","_isEmpty","$productId","optionChangeCallback","optionChangeDecorator","utils","optionChange","serialize","updateProductAttributes","bannerUtils","previewModal","modalFactory","halo_viewing_product","viewingProduct","checkValidity","updateProductDetailsData","toggleWalletButtonsVisibility","unsatisfiedRequiredFields","optionLabel","innerText","optionTitle","required","toLowerCase","getAttribute","querySelector","isSatisfied","Array","from","querySelectorAll","every","select","selectedIndex","dateString","x","join","checked","getSelectedOptionLabel","convertIntoArray","filter","inpt","dataset","productAttributeValue","labels","productVariant","sort","view","productName","isRunningInIframe","self","top","$changedOption","parents","productId","err","response","productAttributesContent","updateView","_this3","setTimeout","change_img","op","opTitle","prop","color","$swatch","swatchName","setLiveRegionAttributes","$element","roleType","ariaLiveStatus","role","showProductImage","image","_isPlainObject","imageSrcset","getSrcset","zoomSize","productSize","_this4","viewModel","getViewModel","$input","quantity","quantityMin","parseInt","quantityMax","currentStock","qty","$text","which","keyCode","form","_this5","$addToCartBtn","originalBtnVal","waitMessage","cart","itemAdd","formData","res","_step","_iterator","_createForOfIteratorHelperLoose","done","_step$value","key","filterEmptyValuesFromForm","_step2","_iterator2","_step2$value","File","name","size","filterEmptyFilesFromForm","tmp","createElement","innerHTML","showAlertModal","haloAddToCartAction","loadingClass","$body","$cartDropdown","$cartLoading","toggleClass","getContent","template","haloCalculateFreeShipping","open","updateCartContent","cart_item","id","setupFocusableElements","modalTypes","PRODUCT_DETAILS","redirectTo","cart_url","urls","getCartContent","cartItemId","onComplete","params","suggest","config","suggestions","limit","iframeSdk","modal","updateContent","$cartQuantity","$cartCounter","$promotionBanner","$backToShopppingBtn","$modalCloseBtn","bannerUpdateHandler","$productContainer","reload","productDetails","serializeArray","formDataItem","Number","match","optionId","optionValue","optionSelections","concat","bubbles","numbersProductS","number_products","numbersProductList","JSON","parse","numbersProductItem","Math","floor","random","numbersProduct","numbersHoursS","number_hours","numbersHoursList","numbersHour","itemPrdsText","number_products_text","itemHoursText","number_hours_text","ViewerText","halo_viewing_product_text","numbersViewer_text","halo_viewing_product_viewer","numbersViewerList","timeViewer","halo_viewing_product_change","setInterval","numbersViewerItem","ProductDetailsBase","VideoGallery","$player","$videos","currentVideo","selectNewVideo","setMainVideo","relate_tab","$bundle","showList","list","forEach","item","pId","attributesData","attributesContent","updateDefaultAttributesForOOS","totalPrice","getSrc","productgallery_size","productOptions","slick","dots","arrows","slidesToShow","slidesToScroll","mobileFirst","infinite","nextArrow","prevArrow","responsive","breakpoint","settings","checkBeforeAdd","$attributes","check","focus","att","addToCart","arrP","k","alert","$sideCartBlock","total","pos","symbol","currency","parseFloat","toFixed","isNaN","behavior","out_of_stock_behavior","inStockIds","in_stock_attributes","outOfStockMessage","out_of_stock_message","attribute","$attribute","attrId","getAttributeType","toggleOption","enableSelectOptionAttribute","enableAttribute","$select","disableSelectOptionAttribute","disableAttribute","$parent","closest","message","$messageBox","$priceWithTax","$priceWithoutTax","rrpWithTax","$div","$span","rrpWithoutTax","nonSaleWithTax","nonSaleWithoutTax","priceSaved","priceNowLabel","priceLabel","$weight","$increments","$addToCart","$wishlistVariation","stock","$container","$sku","$upc","$mpn","$bulkPricing","stock_message","purchasing_message","_isObject","clearPricingNotFound","formatted","rrp_with_tax","rrp_without_tax","saved","non_sale_price_with_tax","non_sale_price_without_tax","updatePriceView","purchasable","instock","firstItem","prodBundleId","productCustomFields","product","getById","showBundle","not","arrPro","len","checkProduct","WRITE_REVIEW","Product","_PageManager","$reviewLink","$bulkPricingLink","reviewModal","onReady","pluginKey","token","history","replaceState","pathname","collapsibleFactory","BCData","product_attributes","$el","bulkPricingHandler","hlGlobal","scrollTop","offset","scroll","onload","haloStickyAddToCart","hideOptionNoPurchasable","halo_bundle_products_enable","haloBundleProducts","halo_prev_next_product","nextLink","prevLink","nextId","prevId","$prodWrap","$prodIcons","$options","haloPrevNextProduct","classifyForm","review","Review","appendTo","ariaDescribeReviewInputs","areAll","productReviewHandler","input","msgSpanId","siblings","wWidth","innerWidth","$desTab","$infoTab","slideDown","$loadTabBtn","$firstTab","url_loadTab","thisTab","$thisTab","get","fail","$btnTabMobile","idTab","thisTop","slideUp","$tabActiveMobile","$shareLinkBtn","$shareLinkPopup","$shareLinkClose","$shareLinkCopy","execCommand","productID","getProductOptions","then","site","products","edges","node","variants","variant","isPurchasable","entityId","option","values","optionValueId","optionValueElement","isDefault","fetch","method","headers","stringify","query","json","PageManager"],"sourceRoot":""}